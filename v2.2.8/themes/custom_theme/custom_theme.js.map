{"version":3,"sources":["../../../../../src/themes/custom_theme/custom_theme.es6"],"names":["chartData","prevTheme","$","extend","Highcharts","getOptions","win","themeConf","createThemeObject","id","color","substring","indexOf","temp","end","split","forEach","property","index","arr","length","JSON","parse","init","$menuLink","click","moveToTop","$html","html","i18n","find","each","ele","attr","replace","alpha","val","getCurrentValue","css","background","setOptions","data","colorpicker","showOn","position","my","of","collision","part","map","size","bar","colorFormat","open","event","colorPicker","setColor","select","formatted","updateChart","ok","cancel","windows","createBlankWindow","autoOpen","resizable","collapsable","minimizable","maximizable","closable","closeOnEscape","width","height","title","modal","destroy","buttons","Apply","require","themes","$ele","elementText","text","themeName","confirmationDialog","Cancel","dialog","resetTheme","createChart","value","obj","defaultOptions","prop","chartOptions","chart","spacingLeft","marginLeft","series","type","navigator","enabled","credits","href","xAxis","ordinal","yAxis","opposite","rangeSelector","tooltip","crosshairs","dashStyle","enabledIndicators","exporting","highcharts"],"mappings":"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","file":"custom_theme.js","sourcesContent":["/**\n * Created by apoorv on 9/06/16.\n */\nimport $ from 'jquery';\nimport windows from '../../windows/windows';\nimport 'highstock-release/highstock';\nimport 'color-picker';\nimport html from 'text!./custom_theme.html';\nimport 'css!./custom_theme.css';\n\nconst chartData = [\n   [1452412800, 32.87, 33.75, 32.50, 33.28], [1452427200, 33.27, 34.45, 32.81, 34.22],\n   [1452441600, 34.23, 34.73, 33.72, 33.77], [1452456000, 34.23, 34.48, 33.73, 33.84],\n   [1452470400, 33.84, 34.42, 33.20, 33.33], [1452484800, 33.34, 33.73, 32.80, 33.55],\n   [1452499200, 32.70, 33.22, 32.56, 32.91], [1452513600, 32.89, 33.38, 32.05, 32.17],\n   [1452528000, 32.16, 32.20, 31.21, 31.54], [1452542400, 30.80, 31.87, 30.76, 31.65],\n   [1452556800, 31.66, 32.37, 30.88, 31.09], [1452571200, 31.10, 31.27, 30.38, 30.84],\n   [1452585600, 31.52, 31.84, 31.23, 31.48]\n];\nlet prevTheme = $.extend(true, {}, Highcharts.getOptions(), {}),\n    win = null,\n    themeConf = {};\n\nconst createThemeObject = (id, color) => {\n   if (!color) {\n      return;\n   }\n\n   color = color.substring(0, color.indexOf(')') + 1); //Fixing mozilla bug\n   let temp = \"\",  end = \"\";\n   id.split(\"_\").forEach((property, index, arr) => {\n      end = end + \"}\";\n      if (index === arr.length - 1) {\n         temp = temp + \"{\" + \"\\\"\" + property + \"\\\"\" + \":\" + \"\\\"\" + color + \"\\\"\";\n         return;\n      }\n      temp = temp + \"{\" + \"\\\"\" + property + \"\\\"\" + \":\";\n   });\n   temp = temp + end;\n   $.extend(themeConf, JSON.parse(temp));\n}\n\nexport const init = ($menuLink) => {\n   $menuLink.click(() => {\n      if(win) {\n         win.moveToTop();\n         return;\n      }\n      const $html = $(html).i18n();\n      $html.find(\".color_input_width\").each((index, ele) => {\n         const id = $(ele).attr(\"id\").replace(\"theme_\", \"\"),\n            alpha = $(ele).attr(\"alpha\");\n         let val = getCurrentValue(id);\n\n         if (val) {\n            $(ele).css({background: val});\n         } else {\n            val = $(ele).css(\"background-color\");\n            createThemeObject(id, val);\n            Highcharts.setOptions(themeConf);\n         }\n         $(ele).data(\"prevColor\",val);\n         $(ele).colorpicker({\n            showOn: 'click',\n            position: {\n               my: \"left+50 bottom+100\",\n               of: \"element\",\n               collision: \"fit\"\n            },\n            part: {\n               map: {size: 128},\n               bar: {size: 128}\n            },\n            alpha: alpha? true: false,\n            colorFormat: \"RGBA\",\n            open: function(event, color) {\n               color.colorPicker.setColor($(this).css(\"background-color\"));\n            },\n            select: (event, color) => {\n               $(ele).css({\n                  background: color.formatted\n               }).val('');\n               createThemeObject(id, color.formatted);\n               updateChart();\n            },\n            ok: (event, color) => {\n               if(!color.formatted){\n                  return;\n               }\n               $(ele).css({\n                  background: color.formatted\n               }).val('');\n               $(ele).data(\"prevColor\",$(ele).css(\"background-color\"));\n               createThemeObject(id, color.formatted);\n               updateChart();\n            },\n            cancel: (event) => {\n               $(ele).css({\n                  background: $(ele).data(\"prevColor\")\n               }).val('');\n               createThemeObject(id, $(ele).data(\"prevColor\"));\n               updateChart();\n            }\n         });\n      });\n\n      win = windows.createBlankWindow($html,\n         {\n            autoOpen: false,\n            resizable: false,\n            collapsable: false,\n            minimizable: false,\n            maximizable: false,\n            closable: false,\n            closeOnEscape: false,\n            width: 650,\n            height: 515,\n            title: 'Customize chart appearance'.i18n(),\n            modal: true,\n            destroy: () => { win = null; },\n            buttons: {\n               Apply: () => require(['themes/themes'],\n                  (themes) => {\n                     const $ele = $('a.theme_custom');\n                     const elementText = $ele.text();\n                     const themeName = $ele.attr('theme-name');\n                     themes.confirmationDialog(Highcharts.getOptions(), themeName, elementText);\n                  }\n               ),\n               Cancel: function () {\n                  $(this).dialog('close');\n                  $(this).dialog(\"destroy\");\n                  resetTheme();\n               }\n            }\n         });\n\n      win.dialog('open');\n      createChart();\n   });\n}\n\nconst getCurrentValue = (id) => {\n   let value = prevTheme;\n   id.split(\"_\").forEach((obj) => {\n      if (value)  value = value[obj];\n   });\n   return value;\n}\n\nconst resetTheme = () => {\n   const defaultOptions = Highcharts.getOptions();\n   for (const prop in defaultOptions) {\n      if (typeof defaultOptions[prop] !== 'function') delete defaultOptions[prop];\n   }\n   Highcharts.setOptions(prevTheme);\n}\n\nconst createChart = () => {\n   const chartOptions = {\n      chart: {\n         spacingLeft: 0,\n         marginLeft: 45, /* disable the auto size labels so the Y axes become aligned */\n         //,plotBackgroundImage: 'images/binary-watermark-logo.svg'\n      },\n      series: [{\n         type: \"candlestick\",\n         data: chartData\n      }],\n      navigator: {\n         enabled: true,\n         series: {\n            id: 'navigator'\n         }\n      },\n\n      title: {\n         //Show name on chart if it is accessed with affiliates = true parameter. In normal webtrader mode, we dont need this title because the dialog will have one\n         text: 'Some random index'.i18n()\n      },\n\n      credits: {\n         href: '#',\n         text: '',\n      },\n\n      xAxis: {\n         ordinal: false\n      },\n\n      yAxis: [{\n         opposite: false,\n      }],\n\n      rangeSelector: {\n         enabled: false\n      },\n\n      tooltip: {\n         crosshairs: [{\n            width: 2,\n            color: 'red',\n            dashStyle: 'dash'\n         }, {\n            width: 2,\n            color: 'red',\n            dashStyle: 'dash'\n         }],\n         enabled: true,\n         enabledIndicators: true\n      },\n      exporting: {\n         enabled: false\n      }\n   };\n   $(\"#preview-chart\").highcharts('StockChart', chartOptions);\n}\n\nconst updateChart = () => {\n   Highcharts.setOptions(themeConf);\n   $(\"#preview-chart\").highcharts().destroy();\n   createChart();\n}\n\nexport default { init }\n"]}