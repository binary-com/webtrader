{"version":3,"sources":["../../../../src/charts/chartWindow.es6"],"names":["app_config","local_storage","get","WebtraderCharts","init","appId","liveapi","app_id","lang","server","socket_url","addNewWindow","options","options_copy","$parent","$","extend","title","instrumentName","relativePosition","close","chart","actions","destroy","dialog","remove","resize","reflow","refresh","open","parent","promise","done","windows","createBlankWindow","chartWindow","addNewChart","update_track","track","module_id","is_unique","data","events","anyChange"],"mappings":";;;;;;;;;;;;;;;;;;;;AAWA,QAAMA,aAAaC,cAAcC,GAAd,CAAkB,QAAlB,CAAnB,C,CAXA;;;;AAYAC,oBAAgBC,IAAhB,CAAqB;AACnBC,eAAOC,4BAAQC,MADI;AAEnBC,cAAM,IAFa;AAGnBC,gBAAQH,4BAAQI;AAHG,KAArB;;AAMO,QAAMC,sCAAe,SAAfA,YAAe,CAASC,OAAT,EAAkB;AAC1C,YAAMC,eAAeD,OAArB;AACA,YAAME,UAAU,sBAAE,QAAF,CAAhB;AACAF,kBAAUG,iBAAEC,MAAF,CAAS;AACfC,mBAAOL,QAAQM,cADA;AAEfC,8BAAkB,IAFH;AAGfC,mBAAO,iBAAW;AACdC,sBAAMC,OAAN,CAAcC,OAAd;AACA,sCAAE,IAAF,EAAQC,MAAR,CAAe,SAAf,EAA0BC,MAA1B,GAFc,CAEsB;AACvC,aANc;AAOfC,oBAAQ;AAAA,uBAAML,SAASA,MAAMC,OAAN,CAAcK,MAAd,EAAf;AAAA,aAPO;AAQfC,qBAAS;AAAA,uBAAMP,MAAMC,OAAN,CAAcM,OAAd,EAAN;AAAA,aARM;AASfC,kBAAM,gBAAW;AACb,oBAAML,SAAS,sBAAE,IAAF,CAAf;AACA,sCAAE,IAAF,EAAQM,MAAR,GAAiBC,OAAjB,GAA2BC,IAA3B,CAAgC;AAAA,2BAAMX,MAAMC,OAAN,CAAcK,MAAd,EAAN;AAAA,iBAAhC;AACH;AAZc,SAAT,EAaPf,OAbO,CAAV;AAcA,YAAMY,SAASS,kBAAQC,iBAAR,CAA0BpB,OAA1B,EAAmCF,OAAnC,CAAf;AACA,YAAMS,QAAQlB,gBAAgBgC,WAAhB,CAA4BC,WAA5B,CAAwCtB,OAAxC,EAAiDD,YAAjD,CAAd;AACAQ,cAAMC,OAAN,CAAcK,MAAd;;AAEA,YAAMU,eAAeb,OAAOc,KAAP,CAAa;AAC9BC,uBAAW,aADmB;AAE9BC,uBAAW,KAFmB;AAG9BC,kBAAMpB,MAAMoB,IAAN;AAHwB,SAAb,CAArB;AAKApB,cAAMqB,MAAN,CAAaC,SAAb,GAAyB;AAAA,mBAAMN,aAAahB,MAAMoB,IAAN,EAAb,CAAN;AAAA,SAAzB;;AAEAjB,eAAOA,MAAP,CAAc,MAAd;;AAEA,eAAOA,MAAP;AACH,KA/BM;;sBAkCQ;AACXb;AADW,K","file":"chartWindow.js","sourcesContent":["/**\n * Created by arnab on 2/13/15.\n */\nimport $ from \"jquery\";\nimport windows from \"../windows/windows\";\nimport 'highstock-release/modules/offline-exporting';\nimport 'highstock-release/highcharts-more';\nimport liveapi from '../websockets/binary_websockets';\nimport 'common/util';\nimport 'webtrader-charts';\n\nconst app_config = local_storage.get(\"config\");\nWebtraderCharts.init({\n  appId: liveapi.app_id,\n  lang: 'en',\n  server: liveapi.socket_url\n});\n\nexport const addNewWindow = function(options) {\n    const options_copy = options;\n    const $parent = $('<div/>');\n    options = $.extend({\n        title: options.instrumentName,\n        relativePosition: true,\n        close: function() {\n            chart.actions.destroy();\n            $(this).dialog('destroy').remove(); //completely remove this dialog\n        },\n        resize: () => chart && chart.actions.reflow(),\n        refresh: () => chart.actions.refresh(),\n        open: function() {\n            const dialog = $(this);\n            $(this).parent().promise().done(() => chart.actions.reflow());\n        }\n    }, options);\n    const dialog = windows.createBlankWindow($parent, options);\n    const chart = WebtraderCharts.chartWindow.addNewChart($parent, options_copy);\n    chart.actions.reflow();\n\n    const update_track = dialog.track({\n        module_id: 'chartWindow',\n        is_unique: false,\n        data: chart.data()\n    });\n    chart.events.anyChange = () => update_track(chart.data());\n\n    dialog.dialog('open');\n\n    return dialog;\n};\n\n\nexport default {\n    addNewWindow,\n};\n"]}