{"version":3,"sources":["../../../../src/financialassessment/financialassessment.es6"],"names":["win","win_view","init","createBlankWindow","i18n","title","width","height","resizable","collapsable","minimizable","maximizable","closable","closeOnEscape","modal","ignoreTileAction","close","unbind","dialog","state","financial","experience_array","frequency_array","account_opening_reason_array","account_opening_reason","forex_trading_experience","forex_trading_frequency","indices_trading_experience","indices_trading_frequency","commodities_trading_experience","commodities_trading_frequency","stocks_trading_experience","stocks_trading_frequency","other_derivatives_trading_experience","other_derivatives_trading_frequency","other_instruments_trading_experience","other_instruments_trading_frequency","employment_industry_array","employment_industry","education_level_array","education_level","income_source_array","income_source","net_income_array","net_income","estimated_worth_array","estimated_worth","account_turnover_array","account_turnover","occupation_array","occupation","disabled","empty_field","validate","submit","request","set_financial_assessment","send","then","data","window","location","reload","catch","err","console","error","bind","moveToTop"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,MAAIA,MAAM,IAAV;AAAA,MACEC,WAAW,IADb;;AAGO,MAAMC,sBAAO,SAAPA,IAAO,GAAM;AACxB,QAAI,CAACF,GAAL,EAAU;AACRA,YAAM,kBAAQG,iBAAR,CAA0B,qDAASC,IAAT,EAA1B,EAA2C;AAC/CC,eAAO,uBAAuBD,IAAvB,EADwC;AAE/CE,eAAO,GAFwC;AAG/CC,gBAAQ,GAHuC;AAI/CC,mBAAW,KAJoC;AAK/CC,qBAAa,KALkC;AAM/CC,qBAAa,KANkC;AAO/CC,qBAAa,KAPkC;AAQ/CC,kBAAU,IARqC;AAS/CC,uBAAe,KATgC;AAU/CC,eAAO,IAVwC;AAW/CC,0BAAkB,IAX6B;AAY/C,2BAAmB,MAZ4B;AAa/CC,eAAO,iBAAM;AACXf,mBAASgB,MAAT;AACAhB,qBAAW,IAAX;AACAD,cAAIkB,MAAJ,CAAW,SAAX;AACAlB,gBAAM,IAAN;AACD;AAlB8C,OAA3C,CAAN;AAoBA,UAAMmB,QAAQ;AACZC,mBAAW;AACTC,4BAAkB,CAAC,UAAD,EAAa,WAAb,EAA0B,cAA1B,CADT;AAETC,2BAAiB,CAAC,wCAAD,EAA2C,yCAA3C,EAAsF,+CAAtF,CAFR;AAGTC,wCAA8B,CAAC,mCAAD,EAAsC,gBAAtC,CAHrB;;AAKTC,kCAAwB,EALf;AAMTC,oCAA0B,EANjB;AAOTC,mCAAyB,EAPhB;AAQTC,sCAA4B,EARnB;AASTC,qCAA2B,EATlB;AAUTC,0CAAgC,EAVvB;AAWTC,yCAA+B,EAXtB;AAYTC,qCAA2B,EAZlB;AAaTC,oCAA0B,EAbjB;AAcTC,gDAAsC,EAd7B;AAeTC,+CAAqC,EAf5B;AAgBTC,gDAAsC,EAhB7B;AAiBTC,+CAAqC,EAjB5B;;AAmBTC,qCAA2B,CAAC,cAAD,EAAiB,WAAjB,EAA8B,SAA9B,EAAyC,QAAzC,EAAmD,SAAnD,EAA8D,OAA9D,CAnBlB;AAoBTC,+BAAqB,EApBZ;AAqBTC,iCAAuB,CAAC,SAAD,EAAY,WAAZ,EAAyB,UAAzB,CArBd;AAsBTC,2BAAiB,EAtBR;;AAwBTC,+BAAqB,CAAC,mBAAD,EAAsB,eAAtB,EAAuC,yBAAvC,EAAkE,SAAlE,EAA6E,OAA7E,CAxBZ;AAyBTC,yBAAe,EAzBN;;AA2BTC,4BAAkB,CAAC,mBAAD,EAAsB,mBAAtB,EAA2C,oBAA3C,EAAiE,qBAAjE,EAAwF,eAAxF,CA3BT;AA4BTC,sBAAY,EA5BH;;AA8BTC,iCAAuB,CAAC,oBAAD,EAAuB,qBAAvB,EAA8C,qBAA9C,EAAqE,uBAArE,EAA8F,iBAA9F,CA9Bd;AA+BTC,2BAAiB,EA/BR;;AAiCTC,kCAAwB,CAAC,mBAAD,EAAsB,mBAAtB,EAA2C,oBAA3C,EAAiE,qBAAjE,EAAwF,eAAxF,CAjCf;AAkCTC,4BAAkB,EAlCT;;AAoCTC,4BAAkB,CAAC,oDAAD,EAAuD,UAAvD,EAAmE,eAAnE,EAAoF,QAApF,EAChB,0CADgB,EAC4B,4CAD5B,EAEhB,kDAFgB,EAEoC,4CAFpC,EAGhB,2DAHgB,EAG6C,cAH7C,EAG6D,qBAH7D,EAIhB,QAJgB,CApCT;AA0CTC,sBAAY,EA1CH;AA2CTC,oBAAU;AA3CD,SADC;AA8CZC,qBAAa,KA9CD;AA+CZC,kBAAU,oBAAM;AACd,iBAAOlC,MAAMC,SAAN,CAAgBI,sBAAhB,KAA2C,EAA3C,IAAiDL,MAAMC,SAAN,CAAgBK,wBAAhB,KAA6C,EAA9F,IACLN,MAAMC,SAAN,CAAgBM,uBAAhB,KAA4C,EADvC,IAC6CP,MAAMC,SAAN,CAAgBO,0BAAhB,KAA+C,EAD5F,IAELR,MAAMC,SAAN,CAAgBQ,yBAAhB,KAA8C,EAFzC,IAE+CT,MAAMC,SAAN,CAAgBS,8BAAhB,KAAmD,EAFlG,IAGLV,MAAMC,SAAN,CAAgBU,6BAAhB,KAAkD,EAH7C,IAGmDX,MAAMC,SAAN,CAAgBW,yBAAhB,KAA8C,EAHjG,IAILZ,MAAMC,SAAN,CAAgBY,wBAAhB,KAA6C,EAJxC,IAI8Cb,MAAMC,SAAN,CAAgBa,oCAAhB,KAAyD,EAJvG,IAKLd,MAAMC,SAAN,CAAgBc,mCAAhB,KAAwD,EALnD,IAKyDf,MAAMC,SAAN,CAAgBe,oCAAhB,KAAyD,EALlH,IAMLhB,MAAMC,SAAN,CAAgBgB,mCAAhB,KAAwD,EANnD,IAMyDjB,MAAMC,SAAN,CAAgBkB,mBAAhB,KAAwC,EANjG,IAOLnB,MAAMC,SAAN,CAAgB8B,UAAhB,KAA+B,EAP1B,IAOgC/B,MAAMC,SAAN,CAAgBoB,eAAhB,KAAoC,EAPpE,IAQLrB,MAAMC,SAAN,CAAgBsB,aAAhB,KAAkC,EAR7B,IAQmCvB,MAAMC,SAAN,CAAgBwB,UAAhB,KAA+B,EARlE,IASLzB,MAAMC,SAAN,CAAgB4B,gBAAhB,KAAqC,EAThC,IASsC7B,MAAMC,SAAN,CAAgB0B,eAAhB,KAAoC,EATjF;AAUD;AA1DW,OAAd;AA4DA3B,YAAMmC,MAAN,GAAe,YAAM;AACnBnC,cAAMiC,WAAN,GAAoBjC,MAAMkC,QAAN,EAApB;AACA,YAAIlC,MAAMiC,WAAV,EAAuB;AACrB;AACD;AACDjC,cAAMC,SAAN,CAAgB+B,QAAhB,GAA2B,IAA3B;AACA,YAAMI,UAAU;AACdC,oCAA0B,CADZ;AAEdhC,kCAAwBL,MAAMC,SAAN,CAAgBI,sBAF1B;AAGdC,oCAA0BN,MAAMC,SAAN,CAAgBK,wBAH5B;AAIdC,mCAAyBP,MAAMC,SAAN,CAAgBM,uBAJ3B;AAKdC,sCAA4BR,MAAMC,SAAN,CAAgBO,0BAL9B;AAMdC,qCAA2BT,MAAMC,SAAN,CAAgBQ,yBAN7B;AAOdC,0CAAgCV,MAAMC,SAAN,CAAgBS,8BAPlC;AAQdC,yCAA+BX,MAAMC,SAAN,CAAgBU,6BARjC;AASdC,qCAA2BZ,MAAMC,SAAN,CAAgBW,yBAT7B;AAUdC,oCAA0Bb,MAAMC,SAAN,CAAgBY,wBAV5B;AAWdC,gDAAsCd,MAAMC,SAAN,CAAgBa,oCAXxC;AAYdC,+CAAqCf,MAAMC,SAAN,CAAgBc,mCAZvC;AAadC,gDAAsChB,MAAMC,SAAN,CAAgBe,oCAbxC;AAcdC,+CAAqCjB,MAAMC,SAAN,CAAgBgB,mCAdvC;AAedE,+BAAqBnB,MAAMC,SAAN,CAAgBkB,mBAfvB;AAgBdE,2BAAiBrB,MAAMC,SAAN,CAAgBoB,eAhBnB;AAiBdE,yBAAevB,MAAMC,SAAN,CAAgBsB,aAjBjB;AAkBdE,sBAAYzB,MAAMC,SAAN,CAAgBwB,UAlBd;AAmBdE,2BAAiB3B,MAAMC,SAAN,CAAgB0B,eAnBnB;AAoBdE,4BAAkB7B,MAAMC,SAAN,CAAgB4B,gBApBpB;AAqBdE,sBAAY/B,MAAMC,SAAN,CAAgB8B;AArBd,SAAhB;AAuBA,oCAAQO,IAAR,CAAaF,OAAb,EAAsBG,IAAtB,CAA2B,UAACC,IAAD,EAAU;AACnC1D,mBAASgB,MAAT;AACAhB,qBAAW,IAAX;AACAD,cAAIkB,MAAJ,CAAW,SAAX;AACAlB,gBAAM,IAAN;AACA4D,iBAAOC,QAAP,CAAgBC,MAAhB;AACD,SAND,EAMGC,KANH,CAMS,UAACC,GAAD,EAAS;AAChBC,kBAAQC,KAAR,CAAcF,GAAd;AACD,SARD;AASD,OAtCD;AAuCA/D,iBAAW,sBAAGkE,IAAH,CAAQnE,GAAR,EAAamB,KAAb,CAAX;AACAnB,UAAIkB,MAAJ,CAAW,MAAX;AACD,KA1HD,MA0HO;AACLlB,UAAIoE,SAAJ;AACD;AACF,GA9HM;;oBAgIQ;AACblE;AADa,G","file":"financialassessment.js","sourcesContent":["import rv from 'common/rivetsExtra';\nimport $html from 'text!./financialassessment.html'\nimport $ from 'jquery';\nimport windows from 'windows/windows';\nimport _ from 'lodash';\nimport liveapi from 'websockets/binary_websockets';\nimport 'common/util';\nimport 'jquery-growl';\nimport 'css!./financialassessment.css'\n\nlet win = null,\n  win_view = null;\n\nexport const init = () => {\n  if (!win) {\n    win = windows.createBlankWindow($($html).i18n(), {\n      title: \"Financial Assessment\".i18n(),\n      width: 700,\n      height: 500,\n      resizable: false,\n      collapsable: false,\n      minimizable: false,\n      maximizable: false,\n      closable: true,\n      closeOnEscape: false,\n      modal: true,\n      ignoreTileAction: true,\n      'data-authorized': 'true',\n      close: () => {\n        win_view.unbind();\n        win_view = null;\n        win.dialog('destroy');\n        win = null\n      }\n    });\n    const state = {\n      financial: {\n        experience_array: ['0-1 year', '1-2 years', 'Over 3 years'],\n        frequency_array: ['0-5 transactions in the past 12 months', '6-10 transactions in the past 12 months', '40 transactions or more in the past 12 months'],\n        account_opening_reason_array: ['Speculative Income Earning Assets', 'Saving Hedging'],\n\n        account_opening_reason: '',\n        forex_trading_experience: '',\n        forex_trading_frequency: '',\n        indices_trading_experience: '',\n        indices_trading_frequency: '',\n        commodities_trading_experience: '',\n        commodities_trading_frequency: '',\n        stocks_trading_experience: '',\n        stocks_trading_frequency: '',\n        other_derivatives_trading_experience: '',\n        other_derivatives_trading_frequency: '',\n        other_instruments_trading_experience: '',\n        other_instruments_trading_frequency: '',\n\n        employment_industry_array: ['Construction', 'Education', 'Finance', 'Health', 'Tourism', 'Other'],\n        employment_industry: '',\n        education_level_array: ['Primary', 'Secondary', 'Tertiary'],\n        education_level: '',\n\n        income_source_array: ['Salaried Employee', 'Self-Employed', 'Investments & Dividends', 'Pension', 'Other'],\n        income_source: '',\n\n        net_income_array: ['Less than $25,000', '$25,000 - $50,000', '$50,001 - $100,000', '$100,001 - $500,000', 'Over $500,000'],\n        net_income: '',\n\n        estimated_worth_array: ['Less than $100,000', '$100,000 - $250,000', '$250,001 - $500,000', '$500,001 - $1,000,000', 'Over $1,000,000'],\n        estimated_worth: '',\n\n        account_turnover_array: ['Less than $25,000', '$25,000 - $50,000', '$50,001 - $100,000', '$100,001 - $500,000', 'Over $500,000'],\n        account_turnover: '',\n\n        occupation_array: [\"Chief Executives, Senior Officials and Legislators\", \"Managers\", \"Professionals\", \"Clerks\",\n          \"Personal Care, Sales and Service Workers\", \"Agricultural, Forestry and Fishery Workers\",\n          \"Craft, Metal, Electrical and Electronics Workers\", \"Plant and Machine Operators and Assemblers\",\n          \"Mining, Construction, Manufacturing and Transport Workers\", \"Armed Forces\", \"Government Officers\",\n          \"Others\"\n        ],\n        occupation: '',\n        disabled: false\n      },\n      empty_field: false,\n      validate: () => {\n        return state.financial.account_opening_reason === '' || state.financial.forex_trading_experience === '' ||\n          state.financial.forex_trading_frequency === '' || state.financial.indices_trading_experience === '' ||\n          state.financial.indices_trading_frequency === '' || state.financial.commodities_trading_experience === '' ||\n          state.financial.commodities_trading_frequency === '' || state.financial.stocks_trading_experience === '' ||\n          state.financial.stocks_trading_frequency === '' || state.financial.other_derivatives_trading_experience === '' ||\n          state.financial.other_derivatives_trading_frequency === '' || state.financial.other_instruments_trading_experience === '' ||\n          state.financial.other_instruments_trading_frequency === '' || state.financial.employment_industry === '' ||\n          state.financial.occupation === '' || state.financial.education_level === '' ||\n          state.financial.income_source === '' || state.financial.net_income === '' ||\n          state.financial.account_turnover === '' || state.financial.estimated_worth === '';\n      },\n    };\n    state.submit = () => {\n      state.empty_field = state.validate();\n      if (state.empty_field) {\n        return;\n      }\n      state.financial.disabled = true;\n      const request = {\n        set_financial_assessment: 1,\n        account_opening_reason: state.financial.account_opening_reason,\n        forex_trading_experience: state.financial.forex_trading_experience,\n        forex_trading_frequency: state.financial.forex_trading_frequency,\n        indices_trading_experience: state.financial.indices_trading_experience,\n        indices_trading_frequency: state.financial.indices_trading_frequency,\n        commodities_trading_experience: state.financial.commodities_trading_experience,\n        commodities_trading_frequency: state.financial.commodities_trading_frequency,\n        stocks_trading_experience: state.financial.stocks_trading_experience,\n        stocks_trading_frequency: state.financial.stocks_trading_frequency,\n        other_derivatives_trading_experience: state.financial.other_derivatives_trading_experience,\n        other_derivatives_trading_frequency: state.financial.other_derivatives_trading_frequency,\n        other_instruments_trading_experience: state.financial.other_instruments_trading_experience,\n        other_instruments_trading_frequency: state.financial.other_instruments_trading_frequency,\n        employment_industry: state.financial.employment_industry,\n        education_level: state.financial.education_level,\n        income_source: state.financial.income_source,\n        net_income: state.financial.net_income,\n        estimated_worth: state.financial.estimated_worth,\n        account_turnover: state.financial.account_turnover,\n        occupation: state.financial.occupation\n      }\n      liveapi.send(request).then((data) => {\n        win_view.unbind();\n        win_view = null;\n        win.dialog(\"destroy\");\n        win = null;\n        window.location.reload();\n      }).catch((err) => {\n        console.error(err);\n      })\n    }\n    win_view = rv.bind(win, state);\n    win.dialog(\"open\");\n  } else {\n    win.moveToTop();\n  }\n}\n\nexport default {\n  init\n}\n"]}