{"version":3,"sources":["../../../../src/trade/tradeConf.es6"],"names":["binders","priority","bind","el","model","chart","Highcharts","Chart","title","credits","enabled","type","renderTo","backgroundColor","width","getAttribute","height","marginLeft","tooltip","formatter","tick","array","x","xAxis","min","max","labels","yAxis","align","gridLineWidth","series","data","marker","plotOptions","scatter","enableMouseTracking","exporting","enableImages","legend","routine","ticks","addPlotLineX","options","label_left_or_right","label","addPlotLine","value","id","text","color","addPlotLineY","addPoint","index","length","last","quote","plot_x","getPlotX","plot_y","getPlotY","removePlotLine","last_1000_ticks","events","on","epoch","push","shift","register_ticks","state","extra","tick_count","symbol","purchase_epoch","buy","purchase_time","fn","add_tick","findIndex","t","decimal_digits","digits_after_decimal","pip","number","utc","format","symbol_name","toFixed","update_status","update","back","visible","off","proposal_open_contract","forget","contract_id","category","contract_category","entry","expiry","tracking_timeout_set","track_ticks","filter","forEach","setTimeout","error","growl","message","echo_req","subscribe","contract","entry_tick_time","exit_tick_time","date_expiry","init","show_callback","hide_callback","root","i18n","getbarrier","barrier","includes","category_display","name","longcode","balance_after","buy_price","currencyFractionalDigits","start_time","transaction_id","payout","currency","potential_profit","potential_profit_text","show_result","spreads","amount_per_point","stop_loss_level","stop_profit_level","average","sum","i","avg","inx","categories_with_barrier","should_add_barrier","digits_value","status","chart_visible","show_tick_chart","arrow","isLookback","contract_type","formula","amount","undefined","waiting","won","lost","sell_expired","first_quote","head","last_quote","display","sentiment","css","digits","match","differ","over","under","odd","even","callput","up","down","callputequal","asian","onclick","e","$target","target","hasClass","addClass","require","viewTransaction","then","removeClass","view"],"mappings":"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","file":"tradeConf.js","sourcesContent":["ï»¿/*\n * Created by amin on December 4, 2015.\n */\n\nimport _ from 'lodash';\nimport $ from 'jquery';\nimport moment from 'moment';\nimport liveapi from '../websockets/binary_websockets';\nimport rv from '../common/rivetsExtra';\nimport chartingRequestMap from '../charts/chartingRequestMap';\nimport html from 'text!../trade/tradeConf.html';\nimport 'css!../trade/tradeConf.css';\nimport Lookback from './lookback';\n\n/* rv binder to show tick chart for this confirmation dialog */\nrv.binders['tick-chart'] = {\n   priority: 65, /* a low priority to apply last */\n   bind: function(el) {\n      const model = this.model;\n      el.chart = new Highcharts.Chart({\n         title: '',\n         credits: {enabled: false},\n         chart: {\n            type: 'line',\n            renderTo: el,\n            backgroundColor: null, /* make background transparent */\n            width: (el.getAttribute('width') || 400)*1,\n            height: (el.getAttribute('height') || 120)*1,\n            marginLeft: 20,\n         },\n         tooltip: {\n            formatter: function () {\n               const tick = model.array[this.x-1];\n               return (tick && tick.tooltip) || false;\n            }\n         },\n         xAxis: {\n            type: 'linear',\n            min: 1,\n            max: el.getAttribute('tick-count')*1 + 1 /* exist spot vertical plot will not be at the end */,\n            labels: { enabled: false, }\n         },\n         yAxis: {\n            labels: { align: 'left', x: 0, },\n            title: '',\n            gridLineWidth: 0,\n         },\n         series: [\n            { data: [] },\n            /* HighChart scales the y-axis automatically based on the maximum value of data.\n             * but it doesn't consider the plotLine's value in its calculations.\n             * We add an invisible seri and late plotline values to work around this issue. */\n            {\n               type: 'scatter',\n               marker: { enabled: false },\n               data: []\n            }\n         ],\n         plotOptions: { scatter: { enableMouseTracking: false } },\n         exporting: {enabled: false, enableImages: false},\n         legend: {enabled: false},\n      });\n   },\n   routine: function(el, ticks){\n      const model = this.model;\n      const addPlotLineX = (chart, options) => {\n         const label_left_or_right = options.label === 'Entry Spot' ? -15 : 5;\n\n         chart.xAxis[0].addPlotLine({\n            value: options.value,\n            id: options.id || options.value,\n            label: {text: options.label || 'label', x:  label_left_or_right },\n            color: options.color || '#e98024',\n            width: options.width || 2,\n         });\n      };\n\n      const addPlotLineY = (chart,options) => {\n         chart.yAxis[0].addPlotLine({\n            id: options.id || options.label,\n            value: options.value,\n            label: {text: options.label, align: 'center'},\n            color: 'green',\n            width: 2,\n         });\n\n         /* Add plotline value to invisible seri to make the plotline always visible. */\n         chart.series[1].addPoint([1, options.value*1]);\n      };\n\n      const index = ticks.length;\n      if(index == 0) return;\n\n      const tick = _.last(ticks);\n      el.chart.series[0].addPoint([index, tick.quote*1]);\n\n      const plot_x = model.getPlotX(); // could return null\n      plot_x && addPlotLineX(el.chart,plot_x);\n      const plot_y = model.getPlotY(); // could return null\n      plot_y && el.chart.yAxis[0].removePlotLine(plot_y.id);\n      plot_y && addPlotLineY(el.chart, plot_y);\n\n   } /* end of routine() */\n};\n\nconst last_1000_ticks = []; /* record the last 1k ticks returned */\nliveapi.events.on('tick', (data) => {\n   const tick = data.tick;\n   tick.quote *= 1;\n   tick.epoch *= 1;\n   last_1000_ticks.push(tick);\n   if(last_1000_ticks.length > 1000)\n      last_1000_ticks.shift();\n});\n\nconst register_ticks = (state, extra) => {\n   let tick_count = extra.tick_count * 1,\n      symbol = extra.symbol,\n      purchase_epoch = state.buy.purchase_time * 1,\n      fn = null;\n\n   /* No need to worry about WS connection getting closed, because the user will be logged out */\n   const add_tick = (tick) =>{\n      if (_.findIndex(state.ticks.array, (t) => (t.epoch*1 === tick.epoch*1)) === -1 && tick_count > 0) {\n         const decimal_digits = chartingRequestMap.digits_after_decimal(extra.pip, symbol);\n         state.ticks.array.push({\n            quote: tick.quote,\n            epoch: tick.epoch,\n            number: state.ticks.array.length + 1,\n            tooltip: moment.utc(tick.epoch*1000).format(\"dddd, MMM D, HH:mm:ss\") + \"<br/>\" +\n            extra.symbol_name + \" \" + tick.quote.toFixed(decimal_digits),\n            decimal_digits : decimal_digits\n         });\n         --tick_count;\n         if (tick_count === 0) {\n            state.ticks.update_status();\n            state.buy.update();\n            /* show buy-price final and profit & update title */\n            state.back.visible = true;\n            /* show back button */\n            liveapi.events.off('proposal_open_contract', fn);\n            liveapi.proposal_open_contract.forget(extra.contract_id);\n            /* unregister from proposal_open_contract stream */\n         }\n         /* update state for each new tick in Up/Down && Asians contracts */\n         if (state.ticks.category.contract_category !== 'digits')\n            state.ticks.update_status();\n      }\n   }\n\n   let entry = null, expiry = null;\n   let tracking_timeout_set = false;\n   const track_ticks = () => {\n      tracking_timeout_set = false;\n      last_1000_ticks.filter(\n         (tick) => (tick.symbol === extra.symbol && tick.epoch*1 >= entry && tick.epoch*1 <= expiry)\n      ).forEach(add_tick);\n      if(tick_count > 0) {\n         tracking_timeout_set = true;\n         setTimeout(track_ticks, 300);\n      }\n   }\n\n   fn = liveapi.events.on('proposal_open_contract', (data) => {\n      if(data.error) {\n            $.growl.error({message: data.error.message});\n            liveapi.proposal_open_contract.forget(data.echo_req.contract_id);\n            liveapi.proposal_open_contract.subscribe(data.echo_req.contract_id);\n            return;\n      }\n      const contract = data.proposal_open_contract;\n      if(contract.contract_id !== extra.contract_id) return;\n      entry = contract.entry_tick_time ? contract.entry_tick_time * 1 : entry;\n      // DONT TRUST BACKEND! I'm really angry right now :/\n      // Try everything before calculating expiry.\n      expiry = contract.exit_tick_time ? contract.exit_tick_time * 1 : contract.date_expiry ? contract.date_expiry * 1: expiry;\n      if(!tracking_timeout_set && entry && expiry)\n         track_ticks();\n      return;\n   });\n}\n\n/** @param data\n*  @param extra = {\n*    currency: ,\n*    symbol: \"frxXAUUSD\",\n*    symbol_name: \"Gold/USD\",\n*    category: {},\n*    category_display: ,\n*    duration_unit: ,\n*      pip: \"0.001\",\n*   }\n* @param show_callback\n* @param hide_callback\n**/\nexport const init = (data, extra, show_callback, hide_callback) => {\n   const root = $(html).i18n();\n   const buy = data.buy;\n   const decimal_digits = chartingRequestMap.digits_after_decimal(extra.pip, extra.symbol);\n   extra.getbarrier = (tick) => {\n      let barrier = tick.quote*1;\n      if(extra.barrier && !_(['rise','fall']).includes(extra.category_display.name)) {\n         barrier += extra.barrier*1;\n      }\n      return barrier.toFixed(decimal_digits);\n   }\n   const state = {\n      title: {\n         text: 'Contract Confirmation'.i18n(),\n      },\n      buy: {\n         barrier: null,\n         message: buy.longcode,\n         balance_after: buy.balance_after,\n         buy_price: (+buy.buy_price).toFixed(currencyFractionalDigits()),\n         purchase_time: buy.purchase_time,\n         start_time: buy.start_time,\n         transaction_id: buy.transaction_id,\n         payout: (+buy.payout).toFixed(currencyFractionalDigits()),\n         currency: extra.currency,\n         potential_profit : (buy.payout - buy.buy_price).toFixed(currencyFractionalDigits()),\n         potential_profit_text : 'Profit'.i18n(),\n         show_result: false,\n      },\n      spreads: {\n         amount_per_point: buy.amount_per_point || '0',\n         stop_loss_level: buy.stop_loss_level || '0',\n         stop_profit_level: buy.stop_profit_level || '0',\n      },\n      ticks: {\n         array: [],\n         average: () => {\n            const ticks = state.ticks;\n            const array = ticks.array;\n            let sum = 0;\n            for(let i = 0; i < array.length; ++i)\n               sum += array[i].quote*1;\n            const avg = sum / (array.length || 1);\n            return avg;\n         },\n         getPlotX: () => {\n            const ticks = state.ticks;\n            const inx = ticks.array.length;\n            if(inx === 1) return {value: inx, label: 'Entry Spot'.i18n()};\n            if(inx === ticks.tick_count) return {value:inx, label: 'Exit Spot'.i18n()}\n            return null;\n         },\n         getPlotY: () => {\n            const ticks = state.ticks;\n            const inx = ticks.array.length;\n            const tick = ticks.array[inx-1];\n            const categories_with_barrier = ['callput', 'callputequal'];\n            const should_add_barrier = (inx === 1 && _(categories_with_barrier).includes(ticks.category.contract_category));\n\n            if (should_add_barrier) {\n               const barrier = extra.getbarrier(tick);\n               state.buy.barrier = barrier; /* update barrier value to show in confirm dialog */\n               return {value: barrier*1, label:'Barrier ('.i18n() +barrier+')', id: 'plot-barrier-y'};\n            }\n\n            if(ticks.category.contract_category === 'asian') {\n               //https://trello.com/c/ticslmb4/518-incorrect-decimal-points-for-asian-average\n               const avg = ticks.average().toFixed(decimal_digits + 1);\n               return {value: avg, label:'Average ('.i18n() + avg + ')', id: 'plot-barrier-y'};\n            }\n            return null;\n         },\n         tick_count: extra.tick_count,\n         value: (extra.digits_value || '0') + '', // last digit value selected by the user\n         category: extra.category,\n         category_display: extra.category_display,\n\n         status: 'waiting', /* could be 'waiting', 'lost' or 'won' */\n         chart_visible: extra.show_tick_chart,\n      },\n      arrow: {\n         visible: !extra.show_tick_chart && extra.category.contract_category !== 'digits',\n      },\n      back: { visible: false }, /* back buttom */\n   };\n\n   if (Lookback.isLookback(extra.category_display.contract_type)) {\n     state.buy.payout = Lookback.formula(extra.category_display.contract_type, extra.amount);\n     state.buy.potential_profit = undefined;\n   }\n\n   state.buy.update = () => {\n      const status = state.ticks.status;\n      state.title.text = { waiting: 'Contract Confirmation'.i18n(),\n         won : 'This contract won'.i18n(),\n         lost: 'This contract lost'.i18n()\n      }[status];\n      if(status === 'lost') {\n         state.buy.potential_profit = (-state.buy.buy_price).toFixed(currencyFractionalDigits());\n         state.buy.payout = (0).toFixed(currencyFractionalDigits());\n         state.buy.potential_profit_text = 'Lost';\n      }\n      if(status === 'won') {\n         state.buy.balance_after = buy.balance_after*1 + state.buy.payout*1;\n         liveapi.sell_expired(); // to update balance immediately\n      }\n      state.buy.show_result = true;\n   }\n   state.ticks.update_status = () => {\n      const decimal_digits = chartingRequestMap.digits_after_decimal(extra.pip, extra.symbol);\n\n      const first_quote = _.head(state.ticks.array).quote.toFixed(decimal_digits) + '',\n         last_quote = _.last(state.ticks.array).quote.toFixed(decimal_digits) + '',\n         barrier = extra.getbarrier(_.head(state.ticks.array)) + '',\n         digits_value = state.ticks.value + '',\n         average = state.ticks.average().toFixed(5);\n      const category = state.ticks.category,\n         display = state.ticks.category_display.sentiment;\n      const css = {\n         digits: {\n            match:  _.last(last_quote) === digits_value,\n            differ:  _.last(last_quote) !== digits_value,\n            over: _.last(last_quote)*1 > digits_value*1,\n            under: _.last(last_quote)*1 < digits_value*1,\n            odd: (_.last(last_quote)*1)%2 === 1,\n            even: (_.last(last_quote)*1)%2 === 0\n         },\n         callput: {\n            up: last_quote*1 > barrier*1,\n            down: last_quote*1 < barrier*1,\n         },\n         callputequal: {\n            up: last_quote*1 > barrier*1,\n            down: last_quote*1 < barrier*1,\n         },\n         asian: {\n            up: average < last_quote*1,\n            down: average > last_quote*1,\n         }\n      };\n      /* set the css class */\n      state.ticks.status = css[category.contract_category][display] ? 'won' : 'lost';\n   }\n\n   state.back.onclick = () => hide_callback(root);\n   state.arrow.onclick = (e) => {\n      const $target = $(e.target);\n      if(!$target.hasClass('disabled')) {\n         $target.addClass('disabled');\n         require(['viewtransaction/viewTransaction'], (viewTransaction) => {\n            viewTransaction.init(extra.contract_id, extra.transaction_id)\n               .then(() => $target.removeClass('disabled'));\n         });\n      }\n   };\n\n   const view = rv.bind(root[0], state)\n\n   if(!state.arrow.visible) { register_ticks(state, extra); }\n   else { state.back.visible = true; }\n\n   show_callback(root);\n}\n\nexport default  { init }\n"]}