{"version":3,"sources":["../../../../src/financialassessment/financialassessment.es6"],"names":["win","win_view","init","windows","createBlankWindow","$html","i18n","title","width","height","resizable","collapsable","minimizable","maximizable","closable","closeOnEscape","modal","ignoreTileAction","close","unbind","dialog","state","financial","experience_array","frequency_array","forex_trading_experience","forex_trading_frequency","indices_trading_experience","indices_trading_frequency","commodities_trading_experience","commodities_trading_frequency","stocks_trading_experience","stocks_trading_frequency","other_derivatives_trading_experience","other_derivatives_trading_frequency","other_instruments_trading_experience","other_instruments_trading_frequency","employment_industry_array","employment_industry","education_level_array","education_level","income_source_array","income_source","net_income_array","net_income","estimated_worth_array","estimated_worth","account_turnover_array","account_turnover","occupation_array","occupation","employment_status","employment_status_array","source_of_wealth","source_of_wealth_array","disabled","empty_field","validate","submit","request","set_financial_assessment","liveapi","send","then","data","window","location","reload","catch","err","console","error","cached","get_financial_assessment","financialassessment","Object","keys","forEach","key","rv","bind","moveToTop"],"mappings":"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","file":"financialassessment.js","sourcesContent":["import rv from 'common/rivetsExtra';\nimport $html from 'text!./financialassessment.html'\nimport $ from 'jquery';\nimport windows from 'windows/windows';\nimport _ from 'lodash';\nimport liveapi from 'websockets/binary_websockets';\nimport 'common/util';\nimport 'jquery-growl';\nimport 'css!./financialassessment.css'\n\nlet win = null,\n  win_view = null;\n\nexport const init = () => {\n  if (!win) {\n    win = windows.createBlankWindow($($html).i18n(), {\n      title: \"Financial Assessment\".i18n(),\n      width: 700,\n      height: 500,\n      resizable: false,\n      collapsable: false,\n      minimizable: false,\n      maximizable: false,\n      closable: true,\n      closeOnEscape: false,\n      modal: true,\n      ignoreTileAction: true,\n      close: () => {\n        win_view.unbind();\n        win_view = null;\n        win.dialog('destroy');\n        win = null\n      }\n    });\n    const state = {\n      financial: {\n        experience_array: ['0-1 year', '1-2 years', 'Over 3 years'],\n        frequency_array: ['0-5 transactions in the past 12 months', '6-10 transactions in the past 12 months', '40 transactions or more in the past 12 months'],\n        \n        forex_trading_experience: '',\n        forex_trading_frequency: '',\n        indices_trading_experience: '',\n        indices_trading_frequency: '',\n        commodities_trading_experience: '',\n        commodities_trading_frequency: '',\n        stocks_trading_experience: '',\n        stocks_trading_frequency: '',\n        other_derivatives_trading_experience: '',\n        other_derivatives_trading_frequency: '',\n        other_instruments_trading_experience: '',\n        other_instruments_trading_frequency: '',\n\n        employment_industry_array: ['Construction', 'Education', 'Finance', 'Health', 'Tourism', 'Other'],\n        employment_industry: '',\n        education_level_array: ['Primary', 'Secondary', 'Tertiary'],\n        education_level: '',\n\n        income_source_array: ['Salaried Employee', 'Self-Employed', 'Investments & Dividends', 'Pension', 'Other'],\n        income_source: '',\n\n        net_income_array: ['Less than $25,000', '$25,000 - $50,000', '$50,001 - $100,000', '$100,001 - $500,000', 'Over $500,000'],\n        net_income: '',\n\n        estimated_worth_array: ['Less than $100,000', '$100,000 - $250,000', '$250,001 - $500,000', '$500,001 - $1,000,000', 'Over $1,000,000'],\n        estimated_worth: '',\n\n        account_turnover_array: ['Less than $25,000', '$25,000 - $50,000', '$50,001 - $100,000', '$100,001 - $500,000', 'Over $500,000'],\n        account_turnover: '',\n\n        occupation_array: [\"Chief Executives, Senior Officials and Legislators\", \"Managers\", \"Professionals\", \"Clerks\",\n          \"Personal Care, Sales and Service Workers\", \"Agricultural, Forestry and Fishery Workers\",\n          \"Craft, Metal, Electrical and Electronics Workers\", \"Plant and Machine Operators and Assemblers\",\n          \"Mining, Construction, Manufacturing and Transport Workers\", \"Armed Forces\", \"Government Officers\",\n          \"Others\"\n        ],\n        occupation: '',\n\n        employment_status: '',\n        employment_status_array: [\"Employed\", \"Pensioner\", \"Self-Employed\", \"Student\", \"Unemployed\"],\n\n        source_of_wealth: '',\n        source_of_wealth_array: [\"Accumulation of Income/Savings\", \"Cash Business\", \"Company Ownership\", \"Divorce Settlement\", \"Inheritance\", \"Investment Income\", \"Sale of Property\", \"Other\"],\n        disabled: false\n      },\n      empty_field: false,\n      validate: () => {\n        return state.financial.forex_trading_experience === '' ||\n          state.financial.forex_trading_frequency === '' || state.financial.indices_trading_experience === '' ||\n          state.financial.indices_trading_frequency === '' || state.financial.commodities_trading_experience === '' ||\n          state.financial.commodities_trading_frequency === '' || state.financial.stocks_trading_experience === '' ||\n          state.financial.stocks_trading_frequency === '' || state.financial.other_derivatives_trading_experience === '' ||\n          state.financial.other_derivatives_trading_frequency === '' || state.financial.other_instruments_trading_experience === '' ||\n          state.financial.other_instruments_trading_frequency === '' || state.financial.employment_industry === '' ||\n          state.financial.occupation === '' || state.financial.education_level === '' ||\n          state.financial.income_source === '' || state.financial.net_income === '' ||\n          state.financial.account_turnover === '' || state.financial.estimated_worth === '' ||\n          state.financial.employment_status === '' || state.financial.source_of_wealth === '';\n      },\n    };\n    state.submit = () => {\n      state.empty_field = state.validate();\n      if (state.empty_field) {\n        return;\n      }\n      state.financial.disabled = true;\n      const request = {\n        set_financial_assessment: 1,\n        forex_trading_experience: state.financial.forex_trading_experience,\n        forex_trading_frequency: state.financial.forex_trading_frequency,\n        indices_trading_experience: state.financial.indices_trading_experience,\n        indices_trading_frequency: state.financial.indices_trading_frequency,\n        commodities_trading_experience: state.financial.commodities_trading_experience,\n        commodities_trading_frequency: state.financial.commodities_trading_frequency,\n        stocks_trading_experience: state.financial.stocks_trading_experience,\n        stocks_trading_frequency: state.financial.stocks_trading_frequency,\n        other_derivatives_trading_experience: state.financial.other_derivatives_trading_experience,\n        other_derivatives_trading_frequency: state.financial.other_derivatives_trading_frequency,\n        other_instruments_trading_experience: state.financial.other_instruments_trading_experience,\n        other_instruments_trading_frequency: state.financial.other_instruments_trading_frequency,\n        employment_industry: state.financial.employment_industry,\n        education_level: state.financial.education_level,\n        income_source: state.financial.income_source,\n        net_income: state.financial.net_income,\n        estimated_worth: state.financial.estimated_worth,\n        account_turnover: state.financial.account_turnover,\n        occupation: state.financial.occupation,\n        employment_status: state.financial.employment_status,\n        source_of_wealth: state.financial.source_of_wealth\n      }\n      liveapi.send(request).then((data) => {\n        win_view.unbind();\n        win_view = null;\n        win.dialog(\"destroy\");\n        win = null;\n        window.location.reload();\n      }).catch((err) => {\n        console.error(err);\n        state.financial.disabled = false;\n      })\n    };\n    liveapi.cached.send({ get_financial_assessment: 1 }).then((data) => {\n      const financialassessment = data.get_financial_assessment;\n      Object.keys(financialassessment).forEach((key) => {\n        state.financial[key] = financialassessment[key];\n      });\n    });\n    win_view = rv.bind(win, state);\n    win.dialog(\"open\");\n  } else {\n    win.moveToTop();\n  }\n}\n\nexport default {\n  init\n}\n"]}