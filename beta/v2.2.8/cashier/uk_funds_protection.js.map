{"version":3,"sources":["../../../../src/cashier/uk_funds_protection.es6"],"names":["init_win","Promise","resolve","reject","$html","$","html","i18n","win","windows","createBlankWindow","title","dialogClass","width","height","resizable","collapsable","minimizable","maximizable","modal","ignoreTileAction","close","message","state","accept","liveapi","send","then","dialog","cancel","rv","bind"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAKO,QAAMA,8BAAW,SAAXA,QAAW;AAAA,eAAM,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC3D,gBAAMC,QAAQC,EAAEC,6BAAF,EAAQC,IAAR,EAAd;AACA,gBAAMC,MAAMC,kBAAQC,iBAAR,CAA0BN,KAA1B,EAAiC;AAC5CO,uBAAO,kBADqC;AAEzCC,6BAAa,gBAF4B;AAGzCC,uBAAO,GAHkC;AAIzCC,wBAAQ,GAJiC;AAKzCC,2BAAW,KAL8B;AAMzCC,6BAAa,KAN4B;AAOzCC,6BAAa,KAP4B;AAQzCC,6BAAa,KAR4B;AASzCC,uBAAO,IATkC;AAUzCC,kCAAkB,IAVuB;AAWzCC,uBAAO,iBAAW;AACdlB,2BAAO,EAAEmB,SAAS,iCAAX,EAAP;AACH;AAbwC,aAAjC,CAAZ;AAeA,gBAAMC,QAAQ,EAAd;AACAA,kBAAMC,MAAN,GAAe,YAAM;AACjBC,4CAAQC,IAAR,CAAa;AACT,oCAAgB,CADP;AAET,6CAAyB;AAFhB,iBAAb,EAGGC,IAHH,CAGQzB,OAHR,EAGgBC,MAHhB,EAGwBwB,IAHxB,CAG6B,YAAI;AAC7BnB,wBAAIoB,MAAJ,CAAW,OAAX;AACH,iBALD;AAMH,aAPD;;AASAL,kBAAMM,MAAN,GAAe,YAAM;AACpBrB,oBAAIoB,MAAJ,CAAW,OAAX;AACAzB,uBAAO,EAAEmB,SAAS,iCAAX,EAAP;AACA,aAHD;;AAKAQ,kCAAGC,IAAH,CAAQ3B,MAAM,CAAN,CAAR,EAAkBmB,KAAlB;AACAf,gBAAIoB,MAAJ,CAAW,MAAX;AACH,SAlC6B,CAAN;AAAA,KAAjB;;sBAoCQ;AACX5B;AADW,K","file":"uk_funds_protection.js","sourcesContent":["import windows from 'windows/windows';\nimport rv from 'common/rivetsExtra';\nimport liveapi from 'websockets/binary_websockets';\nimport html from 'text!cashier/uk_funds_protection.html';\n\nexport const init_win = () => new Promise((resolve, reject) => {\n    const $html = $(html).i18n();\n    const win = windows.createBlankWindow($html, {\n    \ttitle: \"Funds Protection\",\n        dialogClass: \"dialog-confirm\",\n        width: 700,\n        height: 300,\n        resizable: false,\n        collapsable: false,\n        minimizable: false,\n        maximizable: false,\n        modal: true,\n        ignoreTileAction: true,\n        close: function() {\n            reject({ message: \"Please accept funds protection.\" });\n        }\n    });\n    const state = {};\n    state.accept = () => {\n        liveapi.send({\n            \"tnc_approval\": 1,\n            \"ukgc_funds_protection\": 1\n        }).then(resolve,reject).then(()=>{\n            win.dialog(\"close\");\n        });\n    };\n\n    state.cancel = () => {\n    \twin.dialog(\"close\");\n    \treject({ message: \"Please accept funds protection.\" });\n    }\n\n    rv.bind($html[0], state);\n    win.dialog('open');\n});\n\nexport default {\n    init_win\n}\n"]}