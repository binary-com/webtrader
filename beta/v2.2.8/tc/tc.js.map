{"version":3,"sources":["../../../../src/tc/tc.es6"],"names":["win","landing_company_name","events","on","data","dialog","authorize","is_virtual","cached","send","landing_company_details","name","init","div","i18n","find","html","click","then","window","location","reload","createBlankWindow","title","width","minHeight","height","resizable","collapsable","minimizable","maximizable","closable","modal","closeOnEscape","ignoreTileAction","destroy","appendTo","append"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA,QAAIA,MAAM,IAAV;AAAA,QACIC,uBAAuB,EAD3B;;AAGA,gCAAQC,MAAR,CAAeC,EAAf,CAAkB,OAAlB;AAAA,gEAA2B,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACvB,gCAAIJ,GAAJ,EAAS;AACLA,oCAAIK,MAAJ,CAAW,SAAX;AACAL,sCAAM,IAAN;AACH;;AAJsB,iCAKnBI,KAAKE,SAAL,CAAeC,UALI;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mCAQe,4BAAQC,MAAR,CAAeC,IAAf,CAAoB,EAAEC,yBAAyBN,KAAKE,SAAL,CAAeL,oBAA1C,EAApB,CARf;;AAAA;AAQjBS,mDARiB;;AASvBT,mDAAuBS,wBAAwBA,uBAAxB,IAAmDA,wBAAwBA,uBAAxB,CAAgDC,IAA1H;;AATuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA3B;;AAAA;AAAA;AAAA;AAAA;;AAYO,QAAMC,sBAAO,SAAPA,IAAO,GAAM;AACtB,YAAIX,oBAAJ,EAA0B;AACtB,gBAAMY,MAAM,oCAAQC,IAAR,EAAZ;AACAD,gBAAIE,IAAJ,CAAS,uBAAT,EAAkCC,IAAlC,CAAuCf,oBAAvC;AACAY,gBAAIE,IAAJ,CAAS,SAAT,EAAoBE,KAApB,CAA0B,YAAM;AAC5B,4CAAQR,IAAR,CAAa,EAAE,gBAAgB,CAAlB,EAAb,EAAoCS,IAApC,CAAyC;AAAA,2BAAKC,OAAOC,QAAP,CAAgBC,MAAhB,EAAL;AAAA,iBAAzC,EAD4B,CAC6C;AACzErB,oBAAIK,MAAJ,CAAW,SAAX;AACH,aAHD;AAIAL,kBAAM,kBAAQsB,iBAAR,CAA0B,sBAAE,QAAF,CAA1B,EAAuC;AACzCC,uBAAO,uBAAuBT,IAAvB,EADkC;AAEzCU,uBAAO,GAFkC;AAGzCC,2BAAW,EAH8B;AAIzCC,wBAAQ,GAJiC;AAKzCC,2BAAW,KAL8B;AAMzCC,6BAAa,KAN4B;AAOzCC,6BAAa,KAP4B;AAQzCC,6BAAa,KAR4B;AASzCC,0BAAU,IAT+B;AAUzCC,uBAAO,IAVkC;AAWzCC,+BAAe,KAX0B;AAYzCC,kCAAkB,IAZuB;AAazC,mCAAmB,MAbsB;AAczCC,yBAAS,mBAAM;AACXnC,0BAAM,IAAN;AACH;AAhBwC,aAAvC,CAAN;AAkBAa,gBAAIuB,QAAJ,CAAapC,GAAb;AACA;AACA,kCAAE,MAAF,EAAUqC,MAAV,CAAiBrC,IAAIK,MAAJ,CAAW,QAAX,CAAjB;AACAL,gBAAIK,MAAJ,CAAW,MAAX;AACH;AACJ,KA/BM;;sBAiCQ;AACXO;AADW,K","file":"tc.js","sourcesContent":["/**\n * Created by arnab on 5/2/16.\n */\nimport $ from \"jquery\";\nimport windows from \"../windows/windows\";\nimport liveapi from \"../websockets/binary_websockets\";\nimport html from 'text!./tc.html';\nimport 'css!./tc.css';\n\nlet win = null,\n    landing_company_name = '';\n\nliveapi.events.on(\"login\", async (data) => {\n    if (win) {\n        win.dialog('destroy');\n        win = null;\n    }\n    if (data.authorize.is_virtual) {\n        return;\n    }\n    const landing_company_details = await liveapi.cached.send({ landing_company_details: data.authorize.landing_company_name });\n    landing_company_name = landing_company_details.landing_company_details && landing_company_details.landing_company_details.name;\n});\n\nexport const init = () => {\n    if (landing_company_name) {\n        const div = $(html).i18n();\n        div.find('.tc_landing_comp_name').html(landing_company_name);\n        div.find('.button').click(() => {\n            liveapi.send({ \"tnc_approval\": 1 }).then(_ => window.location.reload()); // Reload page to remove previous notification message\n            win.dialog('destroy');\n        });\n        win = windows.createBlankWindow($('<div/>'), {\n            title: 'Terms and Conditions'.i18n(),\n            width: 580,\n            minHeight: 90,\n            height: 220,\n            resizable: false,\n            collapsable: false,\n            minimizable: false,\n            maximizable: false,\n            closable: true,\n            modal: true,\n            closeOnEscape: false,\n            ignoreTileAction: true,\n            'data-authorized': 'true',\n            destroy: () => {\n                win = null;\n            }\n        });\n        div.appendTo(win);\n        //This helps in showing multiple dialog windows in modal form\n        $('body').append(win.dialog('widget'));\n        win.dialog('open');\n    }\n}\n\nexport default {\n    init\n};\n\n"]}