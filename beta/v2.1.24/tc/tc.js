define(["exports","babel-runtime/regenerator","jquery","../windows/windows","../websockets/binary_websockets","text!./tc.html","css!./tc.css"],function(a,b,c,d,e,f){"use strict";function g(a){return a&&a.__esModule?a:{"default":a}}function h(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(i){return void c(i)}return g.done?void a(h):Promise.resolve(h).then(function(a){d("next",a)},function(a){d("throw",a)})}return d("next")})}}Object.defineProperty(a,"__esModule",{value:!0}),a.init=void 0;var i=g(b),j=g(c),k=g(d),l=g(e),m=g(f),n=null,o="";l["default"].events.on("login",function(){var a=h(i["default"].mark(function b(a){var c;return i["default"].wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(n&&(n.dialog("destroy"),n=null),!a.authorize.is_virtual){b.next=3;break}return b.abrupt("return");case 3:return b.next=5,l["default"].cached.send({landing_company_details:a.authorize.landing_company_name});case 5:c=b.sent,o=c.landing_company_details&&c.landing_company_details.name;case 7:case"end":return b.stop()}},b,void 0)}));return function(){return a.apply(this,arguments)}}());var p=a.init=function(){if(o){var a=j["default"](m["default"]).i18n();a.find(".tc_landing_comp_name").html(o),a.find(".button").click(function(){l["default"].send({tnc_approval:1}).then(function(){return window.location.reload()}),n.dialog("destroy")}),n=k["default"].createBlankWindow(j["default"]("<div/>"),{title:"Terms and Conditions".i18n(),width:580,minHeight:90,height:220,resizable:!1,collapsable:!1,minimizable:!1,maximizable:!1,closable:!0,modal:!0,closeOnEscape:!1,ignoreTileAction:!0,"data-authorized":"true",destroy:function(){n=null}}),a.appendTo(n),j["default"]("body").append(n.dialog("widget")),n.dialog("open")}};a["default"]={init:p}});