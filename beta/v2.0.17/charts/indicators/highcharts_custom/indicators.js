IndicatorBase=function(a,b,c){this.options=b,this.indicatorData=[],this.uniqueID=uuid(),this.indicators=c},IndicatorBase.prototype.addPoint=function(){return[]},IndicatorBase.prototype.update=function(){return[]},IndicatorBase.prototype.toString=function(){return"IndicatorBase"},IndicatorBase.prototype.buildSeriesAndAxisConfFromData=function(a){var b=[];this.indicatorData.forEach(function(a){b.push([a.time,a.value])});var c={axisConf:{id:a.id+"-"+this.uniqueID,title:{text:this.toString(),align:"high",offset:0,rotation:0,y:10,x:50},lineWidth:2,plotLines:this.options.levels},seriesConf:{id:this.uniqueID,name:this.toString(),data:b,type:"line",yAxis:a.id+"-"+this.uniqueID,color:this.options.stroke,lineWidth:this.options.strokeWidth,dashStyle:this.options.dashStyle}};return a.onChartIndicator&&(delete c.axisConf,delete c.seriesConf.yAxis,c.seriesConf.onChartIndicator=!0),[c]},IndicatorBase.prototype.getIDs=function(){return[this.uniqueID]},IndicatorBase.prototype.isSameInstance=function(a){return _.isEqual(a.sort(),[this.uniqueID])},STDDEV=function(a,b,c){_.isUndefined(b.appliedTo)&&(b.appliedTo=c.CLOSE),IndicatorBase.call(this,a,b,c),this.sma=new SMA(a,b,c),this.priceData=[];for(var d=0;d<a.length;d++){if(d>=b.period){for(var e=0,f=this.options.period-1;f>=0;f--)e+=Math.pow(c.getIndicatorOrPriceValue(a[d-f],this.options.appliedTo)-this.sma.indicatorData[d-f].value,2);var g=Math.sqrt(e/(this.options.period-1));this.indicatorData.push({time:a[d].time,value:toFixed(g,4)})}else this.indicatorData.push({time:a[d].time,value:0});this.priceData.push(a[d])}},STDDEV.prototype=Object.create(IndicatorBase.prototype),STDDEV.prototype.constructor=STDDEV,STDDEV.prototype.addPoint=function(a){this.priceData.push(a),this.sma.addPoint(a);for(var b=this.priceData.length-1,c=0,d=this.options.period-1;d>=0;d--){var e=Math.pow(this.indicators.getIndicatorOrPriceValue(this.priceData[b-d],this.options.appliedTo)-this.sma.indicatorData[b-d].value,2);c+=e}var f=toFixed(Math.sqrt(c/(this.options.period-1)),4);return this.indicatorData.push({time:a.time,value:f}),[{id:this.uniqueID,value:f}]},STDDEV.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close,this.sma.update(a);for(var c=0,d=this.options.period-1;d>=0;d--)c+=Math.pow(this.indicators.getIndicatorOrPriceValue(this.priceData[b-d],this.options.appliedTo)-this.sma.indicatorData[b-d].value,2);var e=toFixed(Math.sqrt(c/(this.options.period-1)),4);return this.indicatorData[this.indicatorData.length-1].value=e,[{id:this.uniqueID,value:e}]},STDDEV.prototype.toString=function(){return"STDDEV ("+this.options.period+")"},STDDEV.prototype.buildSeriesAndAxisConfFromData=function(a){var b=IndicatorBase.prototype.buildSeriesAndAxisConfFromData.call(this,a);return b.forEach(function(a){a.axisConf.title.x=73}),b},ATR=function(a,b,c){IndicatorBase.call(this,a,b,c),this.tr=[],this.priceData=[];for(var d=0;d<a.length;d++){if(0==d)this.tr.push({time:a[d].time,value:a[d].high-a[d].low});else{var e=c.getIndicatorOrPriceValue(a[d-1],this.options.appliedTo);this.tr.push({time:a[d].time,value:Math.max(Math.max(a[d].high-a[d].low,Math.abs(a[d].high-e)),a[d].low-e)})}if(d>=b.period){var f=(this.indicatorData[d-1].value*(b.period-1)+this.tr[d].value)/b.period;isFinite(f)&&!isNaN(f)&&this.indicatorData.push({time:a[d].time,value:toFixed(f,4)})}else this.indicatorData.push({time:a[d].time,value:0});this.priceData.push(a[d])}},ATR.prototype=Object.create(IndicatorBase.prototype),ATR.prototype.constructor=ATR,ATR.prototype.addPoint=function(a){this.priceData.push(a);var b=this.priceData.length-1,c=this.indicators.getIndicatorOrPriceValue(this.priceData[b-1],this.options.appliedTo),d=Math.max(Math.max(a.high-a.low,Math.abs(a.high-c)),a.low-c),e=toFixed((this.indicatorData[b-1].value*(this.options.period-1)+d)/this.options.period,4);return this.indicatorData.push({time:a.time,value:e}),this.tr.push({time:a.time,value:d}),[{id:this.uniqueID,value:e}]},ATR.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var c=this.indicators.getIndicatorOrPriceValue(this.priceData[b-1],this.options.appliedTo),d=Math.max(Math.max(a.high-a.low,Math.abs(a.high-c)),a.low-c),e=toFixed((this.indicatorData[b-1].value*(this.options.period-1)+d)/this.options.period,4);return this.indicatorData[this.indicatorData.length-1].value=e,this.tr[this.indicatorData.length-1].value=d,[{id:this.uniqueID,value:e}]},ATR.prototype.toString=function(){return"ATR ("+this.options.period+")"},BOP=function(a,b,c){IndicatorBase.call(this,a,b,c);for(var d=0;d<a.length;d++){var e=a[d].close,f=a[d].open,g=a[d].high,h=a[d].low,i=0;g-h!==0&&(i=(e-f)/(g-h)),this.indicatorData.push({time:a[d].time,value:toFixed(i,4)})}},BOP.prototype=Object.create(IndicatorBase.prototype),BOP.prototype.constructor=BOP,BOP.prototype.addPoint=function(a){var b=a.close,c=a.open,d=a.high,e=a.low,f=0;return d-e!==0&&(f=(b-c)/(d-e)),this.indicatorData.push({time:a.time,value:f}),[{id:this.uniqueID,value:f}]},BOP.prototype.update=function(a){var b=a.close,c=a.open,d=a.high,e=a.low,f=0;return d-e!==0&&(f=(b-c)/(d-e)),this.indicatorData[this.indicatorData.length-1].value=f,[{id:this.uniqueID,value:f}]},BOP.prototype.toString=function(){return"BOP"},BOP.prototype.buildSeriesAndAxisConfFromData=function(a){var b=IndicatorBase.prototype.buildSeriesAndAxisConfFromData.call(this,a);return b.forEach(function(a){a.seriesConf.type="column"}),b},NATR=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[],this.atr=new window.ATR(a,b,c);for(var d=0;d<a.length;d++){if(d>=this.options.period-1){var e=c.getIndicatorOrPriceValue(a[d],this.options.appliedTo),f=toFixed(this.atr.indicatorData[d].value/e*100,4);this.indicatorData.push({time:a[d].time,value:f})}else this.indicatorData.push({time:a[d].time,value:0});this.priceData.push(a[d])}},NATR.prototype=Object.create(IndicatorBase.prototype),NATR.prototype.constructor=NATR,NATR.prototype.addPoint=function(a){this.priceData.push(a);var b=(this.priceData.length-1,this.atr.addPoint(a)[0].value),c=this.indicators.getIndicatorOrPriceValue(a,this.options.appliedTo),d=toFixed(b/c*100,4);return this.indicatorData.push({time:a.time,value:d}),[{id:this.uniqueID,value:d}]},NATR.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var c=this.atr.update(a)[0].value,d=this.indicators.getIndicatorOrPriceValue(a,this.options.appliedTo),e=toFixed(c/d*100,4);return this.indicatorData[b].value=e,[{id:this.uniqueID,value:e}]},NATR.prototype.toString=function(){return"NATR ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},ROCP=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[];for(var d=0;d<a.length;d++){if(d>=this.options.period){var e=this.indicators.getIndicatorOrPriceValue(a[d],this.options.appliedTo),f=this.indicators.getIndicatorOrPriceValue(a[d-this.options.period],this.options.appliedTo),g=toFixed((e-f)/f,4);this.indicatorData.push({time:a[d].time,value:g})}else this.indicatorData.push({time:a[d].time,value:0});this.priceData.push(a[d])}},ROCP.prototype=Object.create(IndicatorBase.prototype),ROCP.prototype.constructor=ROCP,ROCP.prototype.addPoint=function(a){this.priceData.push(a);var b=this.priceData.length-1,c=this.indicators.getIndicatorOrPriceValue(this.priceData[b],this.options.appliedTo),d=this.indicators.getIndicatorOrPriceValue(this.priceData[b-this.options.period],this.options.appliedTo),e=toFixed((c-d)/d,4);return this.indicatorData.push({time:a.time,value:e}),[{id:this.uniqueID,value:e}]},ROCP.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var c=this.indicators.getIndicatorOrPriceValue(this.priceData[b],this.options.appliedTo),d=this.indicators.getIndicatorOrPriceValue(this.priceData[b-this.options.period],this.options.appliedTo),e=toFixed((c-d)/d,4);return this.indicatorData[b].value=e,[{id:this.uniqueID,value:e}]},ROCP.prototype.toString=function(){return"ROCP ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},ROCR=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[];for(var d=0;d<a.length;d++){if(d>=this.options.period){var e=this.indicators.getIndicatorOrPriceValue(a[d],this.options.appliedTo),f=this.indicators.getIndicatorOrPriceValue(a[d-this.options.period],this.options.appliedTo),g=toFixed(e/f,4);this.indicatorData.push({time:a[d].time,value:g})}else this.indicatorData.push({time:a[d].time,value:0});this.priceData.push(a[d])}},ROCR.prototype=Object.create(IndicatorBase.prototype),ROCR.prototype.constructor=ROCR,ROCR.prototype.addPoint=function(a){this.priceData.push(a);var b=this.priceData.length-1,c=this.indicators.getIndicatorOrPriceValue(this.priceData[b],this.options.appliedTo),d=this.indicators.getIndicatorOrPriceValue(this.priceData[b-this.options.period],this.options.appliedTo),e=toFixed(c/d,4);return this.indicatorData.push({time:a.time,value:e}),[{id:this.uniqueID,value:e}]},ROCR.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var c=this.indicators.getIndicatorOrPriceValue(this.priceData[b],this.options.appliedTo),d=this.indicators.getIndicatorOrPriceValue(this.priceData[b-this.options.period],this.options.appliedTo),e=toFixed(c/d,4);return this.indicatorData[b].value=e,[{id:this.uniqueID,value:e}]},ROCR.prototype.toString=function(){return"ROCR ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},WILLR=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[],this.calculateWILLRValue=function(a,b){for(var c=a[b].high,d=a[b].close,e=0;e<this.options.period;e++)c=Math.max(c,a[b-e].high),d=Math.min(d,a[b-e].low);var f=this.indicators.getIndicatorOrPriceValue(a[b],this.options.appliedTo),g=-100*(c-f)/(c-d);return toFixed(g,4)};for(var d=0;d<a.length;d++){if(d>=this.options.period){var e=this.calculateWILLRValue(a,d);this.indicatorData.push({time:a[d].time,value:e})}else this.indicatorData.push({time:a[d].time,value:0});this.priceData.push(a[d])}},WILLR.prototype=Object.create(IndicatorBase.prototype),WILLR.prototype.constructor=WILLR,WILLR.prototype.addPoint=function(a){this.priceData.push(a);var b=this.calculateWILLRValue(this.priceData,this.priceData.length-1);return this.indicatorData.push({time:a.time,value:b}),[{id:this.uniqueID,value:b}]},WILLR.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var c=this.calculateWILLRValue(this.priceData,b);return this.indicatorData[b].value=c,[{id:this.uniqueID,value:c}]},WILLR.prototype.toString=function(){return"WILLR ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},BBANDS=function(a,b,c){b.maType=(b.maType||"SMA").toUpperCase(),IndicatorBase.call(this,a,b,c),this.ma=new window[b.maType](a,b,c),this.stddev=new STDDEV(a,b,c),this.indicatorData=this.ma.indicatorData,this.upperBandData=[],this.lowerBandData=[],this.areaRangeData=[],this.uniqueID=[uuid(),uuid(),uuid(),uuid()];for(var d=0;d<a.length;d++){var e=toFixed(this.ma.indicatorData[d].value+this.stddev.indicatorData[d].value*b.devUp,4),f=toFixed(this.ma.indicatorData[d].value-this.stddev.indicatorData[d].value*b.devDn,4);this.upperBandData.push({time:a[d].time,value:e}),this.lowerBandData.push({time:a[d].time,value:f}),this.areaRangeData.push({time:a[d].time,value:[e,f]})}},BBANDS.prototype=Object.create(IndicatorBase.prototype),BBANDS.prototype.constructor=BBANDS,BBANDS.prototype.addPoint=function(a){var b=this.ma.addPoint(a)[0].value,c=this.stddev.addPoint(a)[0].value,d=toFixed(b+c*this.options.devUp,4),e=toFixed(b-c*this.options.devDn,4);return this.indicatorData=this.ma.indicatorData,this.upperBandData.push({time:a.time,value:d}),this.lowerBandData.push({time:a.time,value:e}),this.areaRangeData.push({time:a.time,value:[d,e]}),[{id:this.uniqueID[0],value:b},{id:this.uniqueID[1],value:d},{id:this.uniqueID[2],value:e},{id:this.uniqueID[3],value:[d,e]}]},BBANDS.prototype.update=function(a){var b=this.indicatorData.length-1,c=this.ma.update(a)[0].value,d=this.stddev.update(a)[0].value,e=toFixed(c+d*this.options.devUp,4),f=toFixed(c-d*this.options.devDn,4);return this.indicatorData=this.ma.indicatorData,this.upperBandData[b].value=e,this.lowerBandData[b].value=f,this.areaRangeData[b].value=[e,f],[{id:this.uniqueID[0],value:c},{id:this.uniqueID[1],value:e},{id:this.uniqueID[2],value:f},{id:this.uniqueID[3],value:[e,f]}]},BBANDS.prototype.toString=function(){return"BBANDS ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+", "+this.options.devUp+", "+this.options.devDn+")"},BBANDS.prototype.buildSeriesAndAxisConfFromData=function(){var a=[];this.indicatorData.forEach(function(b){a.push([b.time,b.value])});var b=[];this.upperBandData.forEach(function(a){b.push([a.time,a.value])});var c=[];this.lowerBandData.forEach(function(a){c.push([a.time,a.value])});var d=[];return this.areaRangeData.forEach(function(a){d.push(_.flattenDeep([a.time,a.value]))}),[{seriesConf:{id:this.uniqueID[0],name:"Middle - "+this.toString(),data:a,type:"line",color:this.options.stroke,lineWidth:this.options.strokeWidth,dashStyle:this.options.dashStyle,onChartIndicator:!0}},{seriesConf:{id:this.uniqueID[1],name:"Upper - "+this.toString(),data:b,type:"line",color:this.options.stroke,lineWidth:this.options.strokeWidth,dashStyle:this.options.dashStyle,onChartIndicator:!0}},{seriesConf:{id:this.uniqueID[2],name:"Lower - "+this.toString(),data:c,type:"line",color:this.options.stroke,lineWidth:this.options.strokeWidth,dashStyle:this.options.dashStyle,onChartIndicator:!0}},{seriesConf:{id:this.uniqueID[3],data:d,name:"BBANDS Range",type:"arearange",color:"white",fillColor:"rgba(28,28,28,0.5)",connectNulls:!0,states:{hover:{enabled:!1}},events:{},dataLabels:{enabled:!1},point:{events:{}},enableMouseTracking:!1,onChartIndicator:!0}}]},BBANDS.prototype.getIDs=function(){return this.uniqueID},BBANDS.prototype.isSameInstance=function(a){return _.isEqual(a.sort(),this.uniqueID)},CCI=function(a,b,c){b.maType=(b.maType||"SMA").toUpperCase(),IndicatorBase.call(this,a,b,c),this.tpData=[],this.priceData=[],this.CalculateCCIValue=function(a,b){for(var c=0,d=0;d<this.options.period-1;d++)c+=Math.abs(this.tpMa.indicatorData[b].value-this.tpData[b-d].close);var e=c/this.options.period,f=toFixed((this.tpData[b].close-this.tpMa.indicatorData[b].value)/(.015*e),4);return f};for(var d=0;d<a.length;d++){var e=(a[d].high+a[d].low+a[d].close)/3;this.tpData.push({time:a[d].time,close:e})}b.appliedTo=this.indicators.CLOSE,this.tpMa=new window[this.options.maType](this.tpData,b,c);for(var d=0;d<a.length;d++){if(d>=this.options.period-1){var f=this.CalculateCCIValue(a,d,!1);this.indicatorData.push({time:a[d].time,value:f})}else this.indicatorData.push({time:a[d].time,value:0});this.priceData.push(a[d])}},CCI.prototype=Object.create(IndicatorBase.prototype),CCI.prototype.constructor=CCI,CCI.prototype.addPoint=function(a){this.priceData.push(a);var b=this.priceData.length-1,c=(this.priceData[b].high+this.priceData[b].low+this.priceData[b].close)/3;this.tpData.push({time:a.time,close:c}),this.tpMa.addPoint(this.tpData[b]);var d=this.CalculateCCIValue(this.priceData,this.priceData.length-1,!1);return this.indicatorData.push({time:a.time,value:d}),[{id:this.uniqueID,value:d}]},CCI.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var c=(this.priceData[b].high+this.priceData[b].low+this.priceData[b].close)/3;this.tpData[b].close=c,this.tpMa.update(this.tpData[b]);var d=this.CalculateCCIValue(this.priceData,b,!1);return this.indicatorData[b].value=d,[{id:this.uniqueID,value:d}]},CCI.prototype.toString=function(){return"CCI ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},CDL=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[],this.priceData.push(a[0]),this.priceData.push(a[1]);for(var d=2;d<a.length;d++){this.priceData.push(a[d]);var e=this.calculateIndicatorValue(this.options.cdlIndicatorCode);e&&this.indicatorData.push(e)}},CDL.prototype=Object.create(IndicatorBase.prototype),CDL.prototype.constructor=CDL,CDL.prototype.addPoint=function(a){this.priceData.push(a);var b=this.calculateIndicatorValue(this.options.cdlIndicatorCode)||{};return b.text&&this.indicatorData.push(b),[{id:this.uniqueID,value:new CDLUpdateObject(b.x||a.time,b.title,b.text)}]},CDL.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var c=this.calculateIndicatorValue(this.options.cdlIndicatorCode)||{};return c.text&&(this.indicatorData[b]=c),[{id:this.uniqueID,value:new CDLUpdateObject(c.x||a.time,c.title,c.text)}]},CDL.prototype.toString=function(){return this.options.cdlIndicatorCode.toUpperCase()},CDL.prototype.buildSeriesAndAxisConfFromData=function(){return[{seriesConf:{id:this.uniqueID,name:this.toString(),data:this.indicatorData,type:"flags",dashStyle:this.options.dashStyle,onChartIndicator:!0,onSeries:this.options.onSeriesID,shape:"flag",turboThreshold:0}}]},CDLUpdateObject=function(a,b,c){this.x=a,this.title=b,this.text=c,this.toJSObject=function(){return{x:a,title:b,text:c}}},CDL.prototype.CDL2CROWS=function(){var a=CDLGETPARAMS(this.priceData),b=a.isCandleThree_Bullish&&a.isCandleTwo_Bearish&&a.candleTwo_Open>a.candleThree_Close&&a.candleTwo_Close>a.candleThree_Close&&a.isCandleOne_Bearish&&a.candleOne_Open<a.candleTwo_Open&&a.candleOne_Open>a.candleTwo_Close&&a.candleOne_Close<a.candleThree_Close&&a.candleOne_Close>a.candleThree_Open,c=a.isCandleThree_Bearish&&a.isCandleTwo_Bullish&&a.candleTwo_Open<a.candleThree_Close&&a.candleTwo_Close<a.candleThree_Close&&a.isCandleOne_Bullish&&a.candleOne_Open>a.candleTwo_Open&&a.candleOne_Open<a.candleTwo_Close&&a.candleOne_Close>a.candleThree_Close&&a.candleOne_Close<a.candleThree_Open;return{isBear:b,isBull:c}},CDL.prototype.CDLDOJI=function(a,b,c,d){var e=a===d,f=Math.abs(a-b),g=Math.abs(a-c),h=Math.abs(c-b),i=(e||.05*h>=Math.abs(a-d))&&g>f,j=(e||.05*h>=Math.abs(a-d))&&f>g;return{isBull:j,isBear:i}},CDL.prototype.CDL3BLACKCROWS=function(){var a=CDLGETPARAMS(this.priceData),b=!1;a.candleFour_Index>=0&&(b=a.isCandleThree_Bearish&&a.isCandleTwo_Bearish&&a.isCandleOne_Bearish&&a.candleThree_Close<a.candleFour_Low&&a.candleTwo_Close<a.candleThree_Low&&a.candleOne_Close<a.candleTwo_Low&&_.inRange(a.candleThree_Open,a.candleFour_Close,a.candleFour_Open)&&_.inRange(a.candleTwo_Open,a.candleThree_Close,a.candleThree_Open)&&_.inRange(a.candleOne_Open,a.candleTwo_Close,a.candleTwo_Open));var c=!1;return{isBull:c,isBear:b}},CDL.prototype.CDL3INSIDE=function(){var a=CDLGETPARAMS(this.priceData),b=a.isCandleThree_Bullish&&a.isCandleTwo_Bearish&&_.inRange(a.candleTwo_Open,a.candleThree_Open,a.candleThree_Close)&&_.inRange(a.candleTwo_Close,a.candleThree_Open,a.candleThree_Close)&&a.isCandleOne_Bearish&&a.candleOne_Close<a.candleTwo_Close,c=a.isCandleThree_Bearish&&a.isCandleTwo_Bullish&&_.inRange(a.candleTwo_Open,a.candleThree_Close,a.candleThree_Open)&&_.inRange(a.candleTwo_Close,a.candleThree_Close,a.candleThree_Open)&&a.isCandleOne_Bullish&&a.candleOne_Close>a.candleTwo_Close;return{isBear:b,isBull:c}},CDL.prototype.CDL3LINESTRIKE=function(){var a=CDLGETPARAMS(this.priceData),b=!1,c=!1;return a.candleFour_Index>=0&&(b=a.isCandleFour_Bearish&&a.isCandleThree_Bearish&&a.candleThree_Close<a.candleFour_Close&&a.isCandleTwo_Bearish&&a.candleTwo_Close<a.candleThree_Close&&a.isCandleOne_Bullish&&a.candleOne_Close>a.candleFour_Open&&a.candleOne_Open<a.candleTwo_Close,c=a.isCandleFour_Bullish&&a.isCandleThree_Bullish&&a.candleThree_Close>a.candleFour_Close&&a.isCandleTwo_Bullish&&a.candleTwo_Close>a.candleThree_Close&&a.isCandleOne_Bearish&&a.candleOne_Close<a.candleFour_Open&&a.candleOne_Open<a.candleTwo_Close),{isBear:c,isBull:b}},CDL.prototype.CDL3OUTSIDE=function(){var a=CDLGETPARAMS(this.priceData),b=a.isCandleThree_Bullish&&a.isCandleTwo_Bearish&&a.candleTwo_Open>a.candleThree_Close&&a.candleTwo_Close<a.candleThree_Open&&a.isCandleOne_Bearish,c=a.isCandleThree_Bearish&&a.isCandleTwo_Bullish&&a.candleTwo_Open<a.candleThree_Close&&a.candleTwo_Close>a.candleThree_Open&&a.isCandleOne_Bullish;return{isBear:b,isBull:c}},CDL.prototype.CDL3STARSSOUTH=function(){var a=CDLGETPARAMS(this.priceData),b=Math.abs(a.candleThree_Close-a.candleThree_Open),c=Math.abs(a.candleTwo_Close-a.candleTwo_Open),d=Math.abs(a.candleOne_Close-a.candleOne_Open),e=Math.abs(a.candleThree_Low-Math.min(a.candleThree_Close,a.candleThree_Open)),f=Math.abs(a.candleThree_High-Math.max(a.candleThree_Close,a.candleThree_Open)),g=a.isCandleThree_Bearish&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&e>=2*b&&.1*b>f&&a.isCandleTwo_Bearish&&a.candleTwo_Low>a.candleThree_Low&&a.candleTwo_Open<a.candleThree_Open&&a.candleTwo_Close<a.candleThree_Close&&b>c&&a.isCandleOne_Bearish&&a.candleOne_Low>a.candleTwo_Low&&a.candleOne_Open===a.candleOne_High&&a.candleOne_Low===a.candleOne_Close&&c>d,h=!1;return{isBear:h,isBull:g}},CDL.prototype.CDLABANDONEDBABY=function(){var a=CDLGETPARAMS(this.priceData),b=this.CDLDOJI(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close),c=a.isCandleThree_Bullish&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&b.isBear&&a.candleTwo_Low>a.candleThree_High&&a.isCandleOne_Bearish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&a.candleOne_High<a.candleTwo_Low,d=a.isCandleThree_Bearish&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&b.isBull&&a.candleTwo_High<a.candleThree_Low&&a.isCandleOne_Bullish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&a.candleOne_Low>a.candleTwo_High;return{isBear:c,isBull:d}},CDL.prototype.CDLADVANCEBLOCK=function(){var a=CDLGETPARAMS(this.priceData),b=Math.abs(a.candleOne_Open-a.candleOne_Close),c=Math.abs(a.candleThree_Open-a.candleThree_Close),d=Math.abs(a.candleTwo_Open-a.candleTwo_Close),e=Math.abs(a.candleThree_High-a.candleThree_Close),f=Math.abs(a.candleTwo_High-a.candleTwo_Close),g=Math.abs(a.candleOne_High-a.candleOne_Close),h=!1,i=a.isCandleThree_Bullish&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&a.isCandleTwo_Bullish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&c>=d&&a.candleTwo_Close>a.candleThree_Close&&a.candleTwo_Open<=a.candleThree_Close&&a.candleTwo_Open>a.candleThree_Open&&a.isCandleOne_Bullish&&d>=b&&a.candleOne_Close>a.candleTwo_Close&&a.candleOne_Open<=a.candleTwo_Close&&a.candleOne_Open>a.candleTwo_Open&&f>e&&g>e;return{isBear:i,isBull:h}},CDL.prototype.CDLBELTHOLD=function(){var a=CDLGETPARAMS(this.priceData),b=a.isCandleThree_Bearish&&a.isCandleTwo_Bearish&&a.isCandleOne_Bullish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&a.candleOne_Open===a.candleOne_Low&&a.candleOne_Open<a.candleTwo_Close,c=a.isCandleThree_Bullish&&a.isCandleTwo_Bullish&&a.isCandleOne_Bearish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&a.candleOne_Open===a.candleOne_High&&a.candleOne_Open>a.candleTwo_Close;return{isBear:c,isBull:b}},CDL.prototype.CDLBREAKAWAY=function(){var a=CDLGETPARAMS(this.priceData),b=!1,c=!1;if(a.candleFour_Index>=0&&a.candleFive_Index>0)var d=Math.abs(a.candleFive_Close-a.candleFive_Open),e=d/2,b=a.isCandleFive_Bearish&&this.indicators.isLongCandle(a.candleFive_Open,a.candleFive_High,a.candleFive_Low,a.candleFive_Close)&&a.isCandleFour_Bearish&&Math.abs(a.candleFour_Close-a.candleFour_Open)<e&&a.candleFour_Open<a.candleFive_Close&&Math.abs(a.candleThree_Close-a.candleThree_Open)<e&&Math.min(a.candleThree_Close,a.candleThree_Open)<a.candleFour_Close&&Math.abs(a.candleTwo_Close-a.candleTwo_Open)<e&&Math.min(a.candleTwo_Close,a.candleTwo_Open)<Math.min(a.candleThree_Close,a.candleThree_Open)&&a.isCandleOne_Bullish&&a.candleOne_Open>Math.min(a.candleTwo_Close,a.candleTwo_Open)&&a.candleOne_Close>a.candleFour_Open&&a.candleOne_Close<a.candleFive_Open,c=a.isCandleFive_Bullish&&a.isCandleFour_Bullish&&Math.abs(a.candleFour_Close-a.candleFour_Open)<a.shortCandleSize&&a.candleFour_Open>a.candleFive_Close&&Math.abs(a.candleThree_Close-a.candleThree_Open)<e&&Math.max(a.candleThree_Close,a.candleThree_Open)>a.candleFour_Close&&Math.abs(a.candleTwo_Close-a.candleTwo_Open)<e&&Math.max(a.candleTwo_Close,a.candleTwo_Open)>Math.max(a.candleThree_Close,a.candleThree_Open)&&a.isCandleOne_Bearish&&a.candleOne_Open<Math.max(a.candleTwo_Close,a.candleTwo_Open)&&a.candleOne_Close<a.candleFour_Open&&a.candleOne_Close>a.candleFive_Close;return{isBull:b,isBear:c}},CDL.prototype.CDLCLOSINGMARUBOZU=function(){var a=CDLGETPARAMS(this.priceData),b=a.isCandleOne_Bearish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&a.candleOne_Low===a.candleOne_Close,c=a.isCandleOne_Bullish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&a.candleOne_High===a.candleOne_Close;return{isBear:b,isBull:c}},CDL.prototype.CDLCOUNTERATTACK=function(){var a=CDLGETPARAMS(this.priceData),b=Math.abs(a.candleTwo_Close-a.candleTwo_Open),c=a.isCandleTwo_Bearish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.isCandleOne_Bullish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&a.candleOne_Close<=a.candleTwo_Close+.1*b&&a.candleOne_Close>=a.candleTwo_Close-.1*b,d=a.isCandleTwo_Bullish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.isCandleOne_Bearish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&a.candleOne_Close<=a.candleTwo_Close+.1*b&&a.candleOne_Close>=a.candleTwo_Close-.1*b;return{isBear:d,isBull:c}},CDL.prototype.CDLDARKCLOUDCOVER=function(){var a=CDLGETPARAMS(this.priceData),b=!1,c=a.isCandleTwo_Bullish&&a.isCandleOne_Bearish&&a.candleOne_Open>a.candleTwo_Close&&a.candleOne_Close<a.candleTwo_Open+Math.abs(a.candleTwo_Open-a.candleTwo_Close)/2&&a.candleOne_Close>a.candleTwo_Open;return{isBear:c,isBull:b}},CDL.prototype.CDLDOJISTAR=function(){var a=CDLGETPARAMS(this.priceData),b=this.CDLDOJI(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close),c=a.isCandleTwo_Bullish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&b.isBear&&a.candleOne_Close>=a.candleTwo_Close,d=a.isCandleTwo_Bearish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&b.isBull&&a.candleOne_Close<=a.candleTwo_Close;return{isBear:c,isBull:d}},CDL.prototype.CDL3WHITESOLDIERS=function(){var a=CDLGETPARAMS(this.priceData),b=!1,c=!1;return a.candleFour_Index>=0&&(b=a.isCandleThree_Bullish&&a.candleThree_Close>a.candleFour_Close&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&a.isCandleTwo_Bullish&&a.candleTwo_Close>a.candleThree_Close&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.isCandleOne_Bullish&&a.candleOne_Close>a.candleTwo_Close&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close),c=a.isCandleThree_Bearish&&a.candleThree_Close<a.candleFour_Close&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&a.isCandleTwo_Bearish&&a.candleTwo_Close<a.candleThree_Close&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.isCandleOne_Bearish&&a.candleOne_Close<a.candleTwo_Close&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)),{isBear:c,isBull:b}},CDL.prototype.CDLDRAGONFLYDOJI=function(){var a=CDLGETPARAMS(this.priceData),b=Math.abs(a.candleOne_Low-Math.min(a.candleOne_Open,a.candleOne_Close)),c=Math.abs(a.candleOne_High-Math.max(a.candleOne_Open,a.candleOne_Close)),d=Math.abs(a.candleOne_Low-a.candleOne_High),e=Math.abs(a.candleOne_Open-a.candleOne_Close),f=(a.candleOne_Open===a.candleOne_Close||.1*d>e)&&(a.candleOne_High===Math.max(a.candleOne_Open,a.candleOne_Close)||.1*d>c),g=b>=.6*d,h=a.isCandleTwo_Bearish&&f&&g,i=a.isCandleTwo_Bullish&&f&&g;return{isBear:i,isBull:h}},CDL.prototype.CDLENGULFING=function(){var a=CDLGETPARAMS(this.priceData),b=(Math.abs(a.candleOne_Low-Math.min(a.candleOne_Open,a.candleOne_Close)),Math.abs(a.candleOne_High-Math.max(a.candleOne_Open,a.candleOne_Close))),c=Math.abs(a.candleOne_Low-a.candleOne_High),d=Math.abs(a.candleOne_Open-a.candleOne_Close),e=((a.candleOne_Open===a.candleOne_Close||.1*c>d)&&(a.candleOne_High===Math.max(a.candleOne_Open,a.candleOne_Close)||.1*c>b),a.isCandleTwo_Bullish&&a.isCandleOne_Bearish&&a.candleTwo_Close<a.candleOne_Open&&a.candleTwo_Open>a.candleOne_Close),f=a.isCandleTwo_Bearish&&a.isCandleOne_Bullish&&a.candleTwo_Close>a.candleOne_Open&&a.candleTwo_Open<a.candleOne_Close;return{isBear:e,isBull:f}},CDL.prototype.CDLEVENINGDOJISTAR=function(){var a=CDLGETPARAMS(this.priceData),b=!1,c=!1;if(a.candleFour_Index>=0)var d=(Math.abs(a.candleOne_Open-a.candleOne_Close),Math.abs(a.candleThree_Open-a.candleThree_Close),Math.abs(a.candleTwo_Low-a.candleTwo_High)),e=a.candleTwo_Open===a.candleTwo_Close||.1*d>=Math.abs(a.candleTwo_Open-a.candleTwo_Close),b=!1,c=a.isCandleFour_Bullish&&a.isCandleThree_Bullish&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&e&&Math.min(a.candleTwo_Open,a.candleTwo_Close)>a.candleThree_Close&&a.isCandleOne_Bearish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&a.candleOne_Open<Math.min(a.candleTwo_Open,a.candleTwo_Close)&&a.candleOne_Close>a.candleThree_Open&&a.candleOne_Close<a.candleThree_Close;return{isBear:c,isBull:b}},CDL.prototype.CDLEVENINGSTAR=function(){var a=CDLGETPARAMS(this.priceData),b=!1,c=!1;if(a.candleFour_Index>=0)var d=(Math.abs(a.candleOne_Open-a.candleOne_Close),Math.abs(a.candleTwo_Open-a.candleTwo_Close)),e=Math.abs(a.candleTwo_Low-a.candleTwo_High),b=(Math.abs(a.candleThree_Open-a.candleThree_Close),!1),c=a.isCandleFour_Bullish&&a.isCandleThree_Bullish&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&d>=.1*e&&Math.min(a.candleTwo_Open,a.candleTwo_Close)>a.candleThree_Close&&a.isCandleOne_Bearish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&a.candleOne_Open<Math.min(a.candleTwo_Open,a.candleTwo_Close)&&a.candleOne_Close>a.candleThree_Open&&a.candleOne_Close<a.candleThree_Close;return{isBear:c,isBull:b}},CDL.prototype.CDLGAPSIDESIDEWHITE=function(){var a=CDLGETPARAMS(this.priceData),b=a.isCandleThree_Bullish&&a.isCandleTwo_Bullish&&a.candleTwo_Open>a.candleThree_Close&&a.isCandleOne_Bullish&&a.candleOne_Open>a.candleThree_Close&&a.candleOne_Open<a.candleTwo_Close&&a.candleOne_Close<=a.candleTwo_Close+.1*Math.abs(a.candleTwo_Close-a.candleTwo_Open),c=a.isCandleThree_Bearish&&a.isCandleTwo_Bullish&&a.candleTwo_Close<a.candleThree_Close&&a.isCandleOne_Bullish&&a.candleOne_Close<a.candleThree_Close&&a.candleOne_Open<a.candleTwo_Close&&a.candleOne_Close<=a.candleTwo_Close+.1*Math.abs(a.candleTwo_Close-a.candleTwo_Open);

return{isBear:c,isBull:b}},CDL.prototype.CDLGRAVESTONEDOJI=function(){var a=CDLGETPARAMS(this.priceData),b=Math.abs(a.candleOne_High-Math.max(a.candleOne_Open,a.candleOne_Close)),c=Math.abs(a.candleOne_Low-a.candleOne_High),d=(a.candleOne_Open===a.candleOne_Close||.05*c>=Math.abs(a.candleOne_Open-a.candleOne_Close))&&a.candleOne_Low===Math.min(a.candleOne_Open,a.candleOne_Close)||.05*c>=Math.abs(a.candleOne_Low-Math.min(a.candleOne_Open,a.candleOne_Close)),e=b>=.8*c,f=a.isCandleTwo_Bearish&&d&&e,g=a.isCandleTwo_Bullish&&d&&e;return{isBear:g,isBull:f}},CDL.prototype.CDLHAMMER=function(){var a=CDLGETPARAMS(this.priceData),b=Math.abs(Math.max(a.candleOne_Open,a.candleOne_Close)-a.candleOne_High),c=Math.abs(a.candleOne_Open-a.candleOne_Close),d=Math.abs(a.candleOne_Low-a.candleOne_High),e=Math.abs(a.candleOne_Low-Math.min(a.candleOne_Close,a.candleOne_Open)),f=.4*d>c&&(a.candleOne_High===Math.max(a.candleOne_Open,a.candleOne_Close)||.1*d>b),g=a.isCandleTwo_Bearish&&a.candleTwo_Open<Math.min(a.candleThree_Close,a.candleThree_Open)&&f&&e>=2*c&&a.candleOne_Close<a.candleTwo_Close,h=!1;return{isBear:h,isBull:g}},CDL.prototype.CDLHANGINGMAN=function(){var a=CDLGETPARAMS(this.priceData),b=Math.abs(Math.max(a.candleOne_Open,a.candleOne_Close)-a.candleOne_High),c=Math.abs(a.candleOne_Open-a.candleOne_Close),d=Math.abs(a.candleOne_Low-a.candleOne_High),e=Math.abs(a.candleOne_Low-Math.min(a.candleOne_Close,a.candleOne_Open)),f=.4*d>c&&(a.candleOne_High===Math.max(a.candleOne_Open,a.candleOne_Close)||.1*d>b),g=a.isCandleTwo_Bullish&&a.candleTwo_Open>Math.max(a.candleThree_Close,a.candleThree_Open)&&f&&e>=2*c&&a.candleOne_Close>a.candleTwo_Close,h=!1;return{isBear:g,isBull:h}},CDL.prototype.CDLHARAMI=function(){var a=CDLGETPARAMS(this.priceData),b=a.isCandleTwo_Bearish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.isCandleOne_Bullish&&a.candleOne_Open>a.candleTwo_Close&&a.candleOne_Close<a.candleTwo_Open&&Math.abs(a.candleOne_Open-a.candleOne_Close)<.6*Math.abs(a.candleTwo_Open-a.candleTwo_Close),c=a.isCandleTwo_Bullish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.isCandleOne_Bearish&&a.candleOne_Open<a.candleTwo_Close&&a.candleOne_Close>a.candleTwo_Open&&Math.abs(a.candleOne_Open-a.candleOne_Close)<.6*Math.abs(a.candleTwo_Open-a.candleTwo_Close);return{isBear:c,isBull:b}},CDL.prototype.CDLHARAMICROSS=function(){var a=CDLGETPARAMS(this.priceData),b=this.CDLDOJI(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close),c=a.isCandleTwo_Bearish&&b.isBull&&Math.min(a.candleOne_Close,a.candleOne_Open)>a.candleTwo_Close&&Math.max(a.candleOne_Close,a.candleOne_Open)<a.candleTwo_Open,d=a.isCandleTwo_Bullish&&b.isBear&&Math.min(a.candleOne_Close,a.candleOne_Open)>a.candleTwo_Open&&Math.max(a.candleOne_Close,a.candleOne_Open)<a.candleTwo_Close;return{isBear:d,isBull:c}},CDL.prototype.CDLHOMINGPIGEON=function(){var a=CDLGETPARAMS(this.priceData),b=(Math.abs(a.candleOne_Close-a.candleOne_Open),a.isCandleTwo_Bearish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.isCandleOne_Bearish&&a.candleOne_Low>a.candleTwo_Low&&a.candleOne_Close>a.candleTwo_Close&&a.candleOne_High<a.candleTwo_High&&a.candleOne_Open<a.candleTwo_Open),c=!1;return{isBear:c,isBull:b}},CDL.prototype.CDLHIKKAKE=function(){var a=CDLGETPARAMS(this.priceData),b=!1,c=!1;if(a.candleFour_Index>=0&&a.candleFive_Index>0)var b=Math.max(a.candleFive_Close,a.candleFive_Open)>Math.max(a.candleFour_Close,a.candleFour_Open)&&Math.min(a.candleFive_Close,a.candleFive_Open)<Math.min(a.candleFour_Close,a.candleFour_Open)&&Math.max(a.candleFive_Close,a.candleFive_Open)>Math.max(a.candleThree_Close,a.candleThree_Open)&&Math.max(a.candleFive_Close,a.candleFive_Open)>Math.max(a.candleTwo_Close,a.candleTwo_Open)&&a.isCandleOne_Bullish&&a.candleOne_Close>Math.max(a.candleFive_Close,a.candleFive_Open),c=Math.max(a.candleFive_Close,a.candleFive_Open)>Math.max(a.candleFour_Close,a.candleFour_Open)&&Math.min(a.candleFive_Close,a.candleFive_Open)<Math.min(a.candleFour_Close,a.candleFour_Open)&&Math.min(a.candleFive_Close,a.candleFive_Open)<Math.min(a.candleThree_Close,a.candleThree_Open)&&Math.min(a.candleFive_Close,a.candleFive_Open)<Math.min(a.candleTwo_Close,a.candleTwo_Open)&&a.isCandleOne_Bearish&&a.candleOne_Close<Math.min(a.candleFive_Close,a.candleFive_Open);return{isBull:b,isBear:c}},CDL.prototype.CDLIDENTICAL3CROWS=function(){var a=CDLGETPARAMS(this.priceData),b=!1,c=!1;if(a.candleFour_Index>=0)var d=Math.abs(a.candleThree_Close-a.candleThree_Open),e=Math.abs(a.candleTwo_Close-a.candleTwo_Open),b=(Math.abs(a.candleOne_Close-a.candleOne_Open),!1),c=a.isCandleFour_Bullish&&a.isCandleThree_Bearish&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&a.isCandleTwo_Bearish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&(a.candleTwo_Open===a.candleThree_Close||Math.abs(a.candleThree_Close-a.candleTwo_Open)<.1*d)&&a.candleTwo_Close<a.candleThree_Close&&a.isCandleOne_Bearish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&(a.candleOne_Open===a.candleTwo_Close||Math.abs(a.candleTwo_Close-a.candleOne_Open)<.1*e)&&a.candleOne_Close<a.candleTwo_Close;return{isBull:b,isBear:c}},CDL.prototype.CDLINNECK=function(){var a=CDLGETPARAMS(this.priceData),b=Math.abs(a.candleTwo_Close-a.candleTwo_Open),c=a.isCandleThree_Bullish&&a.isCandleTwo_Bullish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.isCandleOne_Bearish&&a.candleOne_Open>a.candleTwo_High&&a.candleOne_Close<a.candleTwo_Close&&a.candleOne_Close>a.candleTwo_Close-.1*b,d=a.isCandleThree_Bearish&&a.isCandleTwo_Bearish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.isCandleOne_Bullish&&a.candleOne_Open<a.candleTwo_Low&&a.candleOne_Close>a.candleTwo_Close&&a.candleOne_Close<a.candleTwo_Close+.1*b;return{isBull:c,isBear:d}},CDL.prototype.CDLINVERTEDHAMMER=function(){var a=CDLGETPARAMS(this.priceData),b=Math.abs(Math.max(a.candleOne_Open,a.candleOne_Close)-a.candleOne_High),c=Math.abs(a.candleOne_Open-a.candleOne_Close),d=Math.abs(a.candleOne_Low-a.candleOne_High),e=Math.abs(a.candleOne_Low-Math.min(a.candleOne_Close,a.candleOne_Open)),f=.4*d>c&&(a.candleOne_Low===Math.min(a.candleOne_Open,a.candleOne_Close)||.1*d>e),g=Math.min(a.candleTwo_Close,a.candleTwo_Open)<Math.min(a.candleThree_Open,a.candleThree_Close)&&Math.min(a.candleOne_Close,a.candleOne_Open)<Math.min(a.candleTwo_Close,a.candleTwo_Open)&&f&&b>=2*c,h=!1;return{isBull:g,isBear:h}},CDL.prototype.CDLKICKING=function(){var a=CDLGETPARAMS(this.priceData),b=a.isCandleTwo_Bearish&&a.candleTwo_Low===a.candleTwo_Close&&a.candleTwo_High===a.candleTwo_Open&&a.isCandleOne_Bullish&&a.candleOne_Low===a.candleOne_Open&&a.candleOne_High===a.candleOne_Close&&a.candleOne_Open>a.candleTwo_Open,c=a.isCandleTwo_Bullish&&a.candleTwo_Low===a.candleTwo_Open&&a.candleTwo_High===a.candleTwo_Close&&a.isCandleOne_Bearish&&a.candleOne_Low===a.candleOne_Close&&a.candleOne_High===a.candleOne_Open&&a.candleOne_Open<a.candleTwo_Open;return{isBull:b,isBear:c}},CDL.prototype.CDLLADDERBOTTOM=function(){var a=CDLGETPARAMS(this.priceData),b=!1,c=!1;if(a.candleFour_Index>=0&&a.candleFive_Index>0)var b=a.isCandleFive_Bearish&&a.isCandleFour_Bearish&&a.candleFour_Open>a.candleFive_Close&&a.candleFour_Close<a.candleFive_Close&&a.candleFour_Open<a.candleFive_Open&&a.isCandleThree_Bearish&&a.candleThree_Open>a.candleFour_Close&&a.candleThree_Close<a.candleFour_Close&&a.candleThree_Open<a.candleFour_Open&&a.isCandleTwo_Bearish&&a.candleTwo_High>a.candleThree_Close&&a.candleTwo_High>a.candleTwo_Open&&a.candleTwo_Close<a.candleThree_Close&&a.candleTwo_Open<a.candleThree_Open&&a.isCandleOne_Bullish&&a.candleOne_Open>a.candleTwo_Open,c=!1;return{isBull:b,isBear:c}},CDL.prototype.CDLKICKINGBYLENGTH=function(){var a=CDLGETPARAMS(this.priceData),b=a.isCandleTwo_Bearish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.candleTwo_Low===a.candleTwo_Close&&a.candleTwo_High===a.candleTwo_Open&&a.isCandleOne_Bullish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&a.candleOne_Low===a.candleOne_Open&&a.candleOne_High===a.candleOne_Close&&a.candleOne_Open>a.candleTwo_Open,c=a.isCandleTwo_Bullish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.candleTwo_Low===a.candleTwo_Open&&a.candleTwo_High===a.candleTwo_Close&&a.isCandleOne_Bearish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&a.candleOne_Low===a.candleOne_Close&&a.candleOne_High===a.candleOne_Open&&a.candleOne_Open<a.candleTwo_Open;return{isBull:b,isBear:c}},CDL.prototype.CDLLONGLEGGEDDOJI=function(){var a=CDLGETPARAMS(this.priceData),b=Math.abs(a.candleOne_Low-Math.min(a.candleOne_Open,a.candleOne_Close)),c=Math.abs(a.candleOne_High-Math.max(a.candleOne_Open,a.candleOne_Close)),d=Math.abs(a.candleOne_Low-a.candleOne_High),e=Math.abs(a.candleOne_Open-a.candleOne_Close),f=a.candleOne_Open===a.candleOne_Close||.1*d>e,g=b>=.4*d&&.8*d>=b,h=c>=.4*d&&.8*d>=c,i=a.isCandleTwo_Bearish&&f&&h&&g,j=a.isCandleTwo_Bullish&&f&&h&&g;return{isBull:i,isBear:j}},CDL.prototype.CDLLONGLINE=function(){var a=CDLGETPARAMS(this.priceData),b=Math.abs(a.candleOne_Low-Math.min(a.candleOne_Open,a.candleOne_Close)),c=Math.abs(a.candleOne_High-Math.max(a.candleOne_Open,a.candleOne_Close)),d=Math.abs(a.candleOne_Low-a.candleOne_High),e=(Math.abs(a.candleOne_Close-a.candleOne_Open),0===b||.1*d>b),f=0===c||.1*d>c,g=a.isCandleOne_Bullish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&e&&f,h=a.isCandleOne_Bearish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&e&&f;return{isBull:g,isBear:h}},CDL.prototype.CDLMARUBOZU=function(){var a=CDLGETPARAMS(this.priceData),b=Math.abs(a.candleOne_Low-Math.min(a.candleOne_Open,a.candleOne_Close)),c=Math.abs(a.candleOne_High-Math.max(a.candleOne_Open,a.candleOne_Close)),d=Math.abs(a.candleOne_Low-a.candleOne_High),e=(Math.abs(a.candleOne_Close-a.candleOne_Open),0===b||.05*d>=b),f=0===c||.05*d>=c;return{isBearishContinuation:a.isCandleOne_Bearish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&f&&e,isBullishContinuation:a.isCandleOne_Bullish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&f&&e}},CDL.prototype.CDLMATCHINGLOW=function(){var a=CDLGETPARAMS(this.priceData),b=a.isCandleTwo_Bearish&&a.candleTwo_Open>a.candleOne_Open&&a.isCandleOne_Bearish&&a.candleOne_Close===a.candleTwo_Close,c=!1;return{isBull:b,isBear:c}},CDL.prototype.CDLMATHOLD=function(){var a=CDLGETPARAMS(this.priceData),b=!1,c=!1;if(a.candleFour_Index>=0&&a.candleFive_Index>0)var b=a.isCandleFive_Bullish&&this.indicators.isLongCandle(a.candleFive_Open,a.candleFive_High,a.candleFive_Low,a.candleFive_Close)&&a.isCandleFour_Bearish&&a.candleFour_Close>a.candleFive_Close&&this.indicators.isLongCandle(a.candleFour_Open,a.candleFour_High,a.candleFour_Low,a.candleFour_Close)&&a.isCandleThree_Bearish&&a.candleThree_Close<a.candleFour_Close&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&a.isCandleTwo_Bearish&&a.candleTwo_Close<a.candleThree_Close&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.candleTwo_Close>a.candleFive_Open&&a.isCandleOne_Bullish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&a.candleOne_Close>a.candleFour_Close,c=a.isCandleFive_Bearish&&this.indicators.isLongCandle(a.candleFive_Open,a.candleFive_High,a.candleFive_Low,a.candleFive_Close)&&a.isCandleFour_Bullish&&a.candleFour_Close<a.candleFive_Close&&this.indicators.isLongCandle(a.candleFour_Open,a.candleFour_High,a.candleFour_Low,a.candleFour_Close)&&a.isCandleThree_Bullish&&a.candleThree_Close>a.candleFour_Close&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&a.isCandleTwo_Bullish&&a.candleTwo_Close>a.candleThree_Close&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.candleTwo_Close<a.candleFive_Open&&a.isCandleOne_Bearish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&a.candleOne_Close<a.candleFour_Close;return{isBull:b,isBear:c}},CDL.prototype.CDLMORNINGDOJISTAR=function(){var a=CDLGETPARAMS(this.priceData),b=!1,c=!1;if(a.candleFour_Index>=0)var d=(Math.abs(a.candleOne_Open-a.candleOne_Close),Math.abs(a.candleThree_Open-a.candleThree_Close),Math.abs(a.candleTwo_Low-a.candleTwo_High)),e=a.candleTwo_Open===a.candleTwo_Close||.1*d>=Math.abs(a.candleTwo_Open-a.candleTwo_Close),b=a.candleThree_Close<Math.min(a.candleFour_Close,a.candleFour_Open)&&a.isCandleThree_Bearish&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&e&&Math.max(a.candleTwo_Open,a.candleTwo_Close)<a.candleThree_Close&&a.isCandleOne_Bullish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&a.candleOne_Open>Math.max(a.candleTwo_Open,a.candleTwo_Close)&&a.candleOne_Close<a.candleThree_Open&&a.candleOne_Close>a.candleThree_Close,c=!1;return{isBull:b,isBear:c}},CDL.prototype.CDLMORNINGSTAR=function(){var a=CDLGETPARAMS(this.priceData),b=!1,c=!1;if(a.candleFour_Index>=0)var d=Math.abs(a.candleOne_Open-a.candleOne_Close),e=Math.abs(a.candleTwo_Open-a.candleTwo_Close),f=Math.abs(a.candleThree_Open-a.candleThree_Close),b=a.candleThree_Close<Math.min(a.candleFour_Close,a.candleFour_Open)&&a.isCandleThree_Bearish&&f>3*e&&f/3>e&&Math.max(a.candleTwo_Open,a.candleTwo_Close)<a.candleThree_Close&&a.isCandleOne_Bullish&&d>3*e&&a.candleOne_Open>Math.max(a.candleTwo_Open,a.candleTwo_Close)&&a.candleOne_Close<a.candleThree_Open,c=!1;return{isBull:b,isBear:c}},CDL.prototype.CDLONNECK=function(){var a=CDLGETPARAMS(this.priceData),b=Math.abs(a.candleTwo_Close-a.candleTwo_Open),c=a.isCandleThree_Bullish&&a.isCandleTwo_Bullish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.isCandleOne_Bearish&&a.candleOne_Open>a.candleTwo_High&&a.candleOne_Close>=a.candleTwo_High&&a.candleOne_Close<=a.candleTwo_High+.1*b,d=a.isCandleThree_Bearish&&a.isCandleTwo_Bearish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.isCandleOne_Bullish&&a.candleOne_Open<a.candleTwo_Low&&a.candleOne_Close<=a.candleTwo_Low&&a.candleOne_Close>=a.candleTwo_Low-.1*b;return{isBull:c,isBear:d}},CDL.prototype.CDLPIERCING=function(){var a=CDLGETPARAMS(this.priceData),b=a.isCandleTwo_Bearish&&a.isCandleOne_Bullish&&a.candleOne_Open<a.candleTwo_Close&&a.candleOne_Close>Math.abs(a.candleTwo_Open+a.candleTwo_Close)/2&&a.candleOne_Close<a.candleTwo_Open,c=!1;return{isBull:b,isBear:c}},CDL.prototype.CDLRICKSHAWMAN=function(){var a=CDLGETPARAMS(this.priceData),b=Math.abs(a.candleOne_Low-Math.min(a.candleOne_Open,a.candleOne_Close)),c=Math.abs(a.candleOne_High-Math.max(a.candleOne_Open,a.candleOne_Close)),d=Math.abs(a.candleOne_Low-a.candleOne_High),e=Math.abs(a.candleOne_Open-a.candleOne_Close),f=a.candleOne_Open===a.candleOne_Close||.1*d>e,g=b>=.4*d&&.8*d>=b,h=c>=.4*d&&.8*d>=c,i=a.isCandleTwo_Bearish&&f&&h&&g,j=a.isCandleTwo_Bullish&&f&&h&&g;return{isBull:i,isBear:j}},CDL.prototype.CDLRISEFALL3METHODS=function(){var a=CDLGETPARAMS(this.priceData),b=!1,c=!1;if(a.candleFour_Index>=0&&a.candleFive_Index>0)var b=a.isCandleFive_Bullish&&this.indicators.isLongCandle(a.candleFive_Open,a.candleFive_High,a.candleFive_Low,a.candleFive_Close)&&a.isCandleFour_Bearish&&a.candleFour_Low>a.candleFive_Low&&a.candleFour_High<a.candleFive_High&&a.isCandleThree_Bearish&&a.candleThree_Low>a.candleFive_Low&&a.candleThree_High<a.candleFive_High&&a.isCandleTwo_Bearish&&a.candleTwo_Low>a.candleFive_Low&&a.candleTwo_High<a.candleFive_High&&a.isCandleOne_Bullish&&a.candleOne_Open>a.candleTwo_Close&&a.candleOne_Close>a.candleFive_Close,c=a.isCandleFive_Bearish&&this.indicators.isLongCandle(a.candleFive_Open,a.candleFive_High,a.candleFive_Low,a.candleFive_Close)&&a.isCandleFour_Bullish&&a.candleFour_Low>a.candleFive_Low&&a.candleFour_High<a.candleFive_High&&a.isCandleThree_Bullish&&a.candleThree_Low>a.candleFive_Low&&a.candleThree_High<a.candleFive_High&&a.isCandleTwo_Bullish&&a.candleTwo_Low>a.candleFive_Low&&a.candleTwo_High<a.candleFive_High&&a.isCandleOne_Bearish&&a.candleOne_Open<a.candleTwo_Close&&a.candleOne_Close<a.candleFive_Close;return{isBull:b,isBear:c}},CDL.prototype.CDLSEPARATINGLINES=function(){var a=CDLGETPARAMS(this.priceData),b=a.candleOne_Open>Math.max(a.candleThree_Open,a.candleThree_Close)&&a.isCandleTwo_Bearish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.isCandleOne_Bullish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&a.candleOne_Open===a.candleTwo_Open,c=a.candleOne_Open<Math.min(a.candleThree_Open,a.candleThree_Close)&&a.isCandleTwo_Bullish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.isCandleOne_Bearish&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&a.candleOne_Open===a.candleTwo_Open;return{isBull:b,isBear:c}},CDL.prototype.CDLSHOOTINGSTAR=function(){var a=CDLGETPARAMS(this.priceData),b=Math.abs(Math.max(a.candleOne_Open,a.candleOne_Close)-a.candleOne_High),c=Math.abs(a.candleOne_Open-a.candleOne_Close),d=Math.abs(a.candleOne_Low-a.candleOne_High),e=Math.abs(a.candleOne_Low-Math.min(a.candleOne_Close,a.candleOne_Open)),f=.4*d>c&&(a.candleOne_Low===Math.min(a.candleOne_Open,a.candleOne_Close)||.1*d>e),g=Math.max(a.candleTwo_Close,a.candleTwo_Open)>Math.max(a.candleThree_Open,a.candleThree_Close)&&Math.max(a.candleOne_Close,a.candleOne_Open)>Math.max(a.candleTwo_Close,a.candleTwo_Open)&&f&&b>=2*c,h=!1;return{isBull:h,isBear:g}},CDL.prototype.CDLSPINNINGTOP=function(){var a=CDLGETPARAMS(this.priceData),b=a.candleOne_High-Math.max(a.candleOne_Open,a.candleOne_Close),c=Math.min(a.candleOne_Open,a.candleOne_Close)-a.candleOne_Low,d=Math.abs(a.candleOne_High-a.candleOne_Low),e=Math.abs(a.candleOne_Open-a.candleOne_Close),f=a.isCandleTwo_Bearish&&a.candleTwo_Close<Math.min(a.candleThree_Open,a.candleThree_Close)&&a.isCandleOne_Bullish&&a.candleOne_Open<a.candleTwo_Close&&.3*d>=e&&b>e&&.5*d>b&&c>e&&.5*d>c,g=a.isCandleTwo_Bullish&&a.candleTwo_Close>Math.max(a.candleThree_Open,a.candleThree_Close)&&a.isCandleOne_Bearish&&a.candleOne_Open>a.candleTwo_Close&&.3*d>=e&&b>e&&.5*d>b&&c>e&&.5*d>c;return{isBear:g,isBull:f}},CDL.prototype.CDLSTALLEDPATTERN=function(){var a=CDLGETPARAMS(this.priceData),b=(Math.abs(a.candleThree_Close-a.candleThree_Open),Math.abs(a.candleTwo_Close-a.candleTwo_Open),Math.abs(a.candleOne_Close-a.candleOne_Open),a.isCandleThree_Bearish&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&a.isCandleTwo_Bearish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.candleTwo_Open<=a.candleThree_Open&&a.isCandleOne_Bearish&&a.candleOne_Open<a.candleTwo_Close),c=a.isCandleThree_Bullish&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&a.isCandleTwo_Bullish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.candleTwo_Open>=a.candleThree_Open&&a.isCandleOne_Bullish&&a.candleOne_Open>a.candleTwo_Close;return{isBear:c,isBull:b}},CDL.prototype.CDLSTICKSANDWICH=function(){var a=CDLGETPARAMS(this.priceData),b=!1,c=!1;if(a.candleFour_Index>=0)var d=Math.abs(a.candleThree_Close-a.candleThree_Open),e=a.candleOne_Close===a.candleThree_Close||a.candleOne_Close<=a.candleThree_Close+.05*d||a.candleOne_Close>=a.candleThree_Close-.05*d,b=a.isCandleThree_Bearish&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&a.candleThree_Close<Math.min(a.candleFour_Close,a.candleFour_Open)&&a.isCandleTwo_Bullish&&a.candleTwo_Close>a.candleThree_Open&&a.candleTwo_Open>a.candleThree_Close&&a.candleTwo_Open<a.candleThree_Open&&a.isCandleOne_Bearish&&a.candleOne_Open>a.candleTwo_Close&&a.candleOne_Close<a.candleTwo_Open&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&e,c=a.isCandleThree_Bullish&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&a.candleThree_Close>Math.max(a.candleFour_Close,a.candleFour_Open)&&a.isCandleTwo_Bearish&&a.candleTwo_Close<a.candleThree_Open&&a.candleTwo_Open<a.candleThree_Close&&a.candleTwo_Open>a.candleThree_Open&&a.isCandleOne_Bullish&&a.candleOne_Open<a.candleTwo_Close&&a.candleOne_Close>a.candleTwo_Open&&this.indicators.isLongCandle(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close)&&e;return{isBull:b,isBear:c}},CDL.prototype.CDLTAKURI=function(){var a=CDLGETPARAMS(this.priceData),b=Math.abs(a.candleOne_Low-Math.min(a.candleOne_Open,a.candleOne_Close)),c=Math.abs(a.candleOne_High-Math.max(a.candleOne_Open,a.candleOne_Close)),d=Math.abs(a.candleOne_Low-a.candleOne_High),e=Math.abs(a.candleOne_Open-a.candleOne_Close),f=(a.candleOne_Open===a.candleOne_Close||.2*d>e)&&(a.candleOne_High===Math.max(a.candleOne_Open,a.candleOne_Close)||.2*d>c),g=b>=.8*d,h=a.isCandleTwo_Bearish&&f&&g,i=a.isCandleTwo_Bullish&&f&&g;return{isBull:h,isBear:i}},CDL.prototype.CDLTASUKIGAP=function(){var a=CDLGETPARAMS(this.priceData),b=a.isCandleThree_Bullish&&a.isCandleTwo_Bullish&&a.candleTwo_Open>a.candleThree_Close&&a.isCandleOne_Bearish&&a.candleOne_Open>a.candleTwo_Open&&a.candleOne_Open<a.candleTwo_Close&&a.candleOne_Close<a.candleTwo_Open&&a.candleOne_Close>a.candleThree_Close,c=a.isCandleThree_Bearish&&a.isCandleTwo_Bearish&&a.candleTwo_Open<a.candleThree_Close&&a.isCandleOne_Bullish&&a.candleOne_Open>a.candleTwo_Close&&a.candleOne_Open<a.candleTwo_Open&&a.candleOne_Close<a.candleThree_Close&&a.candleOne_Close>a.candleTwo_Open;return{isBear:c,isBull:b}},CDL.prototype.CDLTHRUSTING=function(){var a=CDLGETPARAMS(this.priceData),b=a.isCandleTwo_Bearish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.isCandleOne_Bullish&&a.candleOne_Open<a.candleTwo_Close&&a.candleOne_Close<=a.candleTwo_Close+Math.abs(a.candleTwo_Open-a.candleTwo_Close)/2&&a.candleOne_Close>=a.candleTwo_Close,c=a.isCandleTwo_Bullish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.isCandleOne_Bearish&&a.candleOne_Open>a.candleTwo_Close&&a.candleOne_Close>=a.candleTwo_Close-Math.abs(a.candleTwo_Open-a.candleTwo_Close)/2&&a.candleOne_Close<=a.candleTwo_Close;return{isBull:c,isBear:b}},CDL.prototype.CDLTRISTAR=function(){var a=CDLGETPARAMS(this.priceData),b=this.CDLDOJI(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close),c=this.CDLDOJI(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close),d=this.CDLDOJI(a.candleOne_Open,a.candleOne_High,a.candleOne_Low,a.candleOne_Close),e=b.isBull&&c.isBull&&a.candleTwo_Low<a.candleOne_Low&&a.candleTwo_Low<a.candleThree_Low&&d.isBull,f=b.isBear&&c.isBear&&a.candleTwo_High>a.candleOne_High&&a.candleTwo_High>a.candleThree_High&&d.isBear;return{isBear:f,isBull:e}},CDL.prototype.CDLUNIQUE3RIVER=function(){var a=CDLGETPARAMS(this.priceData),b=!1,c=!1;if(a.candleFour_Index>=0)var d=Math.abs(a.candleTwo_Open-a.candleTwo_High),e=Math.abs(a.candleTwo_Open-a.candleTwo_Close),f=Math.abs(a.candleTwo_Low-a.candleTwo_Close),g=f>=2*e&&.1*e>=d,b=(Math.abs(a.candleThree_Close-a.candleThree_Open),a.isCandleFour_Bearish&&a.isCandleThree_Bearish&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&a.candleThree_Close<a.candleFour_Close&&a.isCandleTwo_Bearish&&g&&a.candleTwo_Close>a.candleThree_Close&&a.candleTwo_Open<a.candleThree_Open&&a.candleTwo_Low<a.candleThree_Low&&a.isCandleOne_Bullish&&a.candleOne_Close<a.candleTwo_Close),c=!1;return{isBull:b,isBear:c}},CDL.prototype.CDLUPSIDEGAP2CROWS=function(){var a=CDLGETPARAMS(this.priceData),b=a.isCandleThree_Bullish&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&a.isCandleTwo_Bearish&&a.candleTwo_Close>a.candleThree_Close&&a.isCandleOne_Bearish&&a.candleOne_Close<a.candleTwo_Close&&a.candleOne_Open>a.candleTwo_Open&&a.candleOne_Close>a.candleThree_Close,c=!1;return{isBear:c,isBull:b}},CDL.prototype.CDLXSIDEGAP3METHODS=function(){var a=CDLGETPARAMS(this.priceData),b=a.isCandleThree_Bullish&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&a.isCandleTwo_Bullish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.candleTwo_Open>a.candleThree_Close&&a.isCandleOne_Bearish&&a.candleOne_Open>a.candleTwo_Open&&a.candleOne_Open<a.candleTwo_Close&&a.candleOne_Close<a.candleThree_Close&&a.candleOne_Close>a.candleThree_Open,c=a.isCandleThree_Bearish&&this.indicators.isLongCandle(a.candleThree_Open,a.candleThree_High,a.candleThree_Low,a.candleThree_Close)&&a.isCandleTwo_Bearish&&this.indicators.isLongCandle(a.candleTwo_Open,a.candleTwo_High,a.candleTwo_Low,a.candleTwo_Close)&&a.candleTwo_Open<a.candleThree_Close&&a.isCandleOne_Bullish&&a.candleOne_Open<a.candleTwo_Open&&a.candleOne_Open>a.candleTwo_Close&&a.candleOne_Close>a.candleThree_Close&&a.candleOne_Close<a.candleThree_Open;return{isBear:c,isBull:b}},CDL.prototype.CDLHIGHWAVE=function(){var a=CDLGETPARAMS(this.priceData),b=Math.abs(a.candleOne_Close-a.candleOne_Open),c=(Math.abs(a.candleOne_High-a.candleOne_Low),Math.abs(a.candleOne_High-Math.max(a.candleOne_Open,a.candleOne_Close))),d=Math.abs(Math.min(a.candleOne_Open,a.candleOne_Close)-a.candleOne_Low),e=a.isCandleOne_Bearish&&b>.05*Math.max(c,d)&&d/3>b&&c/3>b,f=a.isCandleOne_Bullish&&b>.05*Math.max(c,d)&&d/3>b&&c/3>b;return{isBear:e,isBull:f}},CDL.prototype.calculateIndicatorValue=function(a){var b,c=this.priceData[this.priceData.length-1].time;switch(a.toUpperCase()){case"CDL2CROWS":var d=this.CDL2CROWS();b=CDLADDFLAGINFO(d,c,"TC","Two crows");break;case"CDLDOJI":var e=this.priceData.length-1,f=this.priceData[e].open,g=this.priceData[e].high,h=this.priceData[e].low,i=this.priceData[e].close,d=this.CDLDOJI(f,g,h,i);b=CDLADDFLAGINFO(d,c,"D","Doji");break;case"CDL3BLACKCROWS":var d=this.CDL3BLACKCROWS();b=CDLADDFLAGINFO(d,c,"TBC","Three Black crows");break;case"CDL3INSIDE":var d=this.CDL3INSIDE();b=CDLADDFLAGINFO(d,c,"TIUD","Three Inside Up/Down");break;case"CDL3LINESTRIKE":var d=this.CDL3LINESTRIKE();b=CDLADDFLAGINFO(d,c,"TLS","Three-Line Strike");break;case"CDL3OUTSIDE":var d=this.CDL3OUTSIDE();b=CDLADDFLAGINFO(d,c,"TOUD","Three Outside Up/Down");break;case"CDL3STARSSOUTH":var d=this.CDL3STARSSOUTH();b=CDLADDFLAGINFO(d,c,"TSS","Three Stars In The South");break;case"CDL3WHITESOLDIERS":var d=this.CDL3WHITESOLDIERS();b=CDLADDFLAGINFO(d,c,"TWS","Three Advancing White Soldiers");break;case"CDLABANDONEDBABY":var d=this.CDLABANDONEDBABY();b=CDLADDFLAGINFO(d,c,"AB","Abandoned Baby");break;case"CDLADVANCEBLOCK":var d=this.CDLADVANCEBLOCK();b=CDLADDFLAGINFO(d,c,"AB","Advance Block");break;case"CDLBELTHOLD":var d=this.CDLBELTHOLD();b=CDLADDFLAGINFO(d,c,"BH","Belt-hold");break;case"CDLBREAKAWAY":var d=this.CDLBREAKAWAY();b=CDLADDFLAGINFO(d,c,"BA","Breakaway");break;case"CDLCLOSINGMARUBOZU":var d=this.CDLCLOSINGMARUBOZU();b=CDLADDFLAGINFO(d,c,"CM","Closing Marubozu");break;case"CDLCOUNTERATTACK":var d=this.CDLCOUNTERATTACK();b=CDLADDFLAGINFO(d,c,"CA","Counterattack");break;case"CDLDARKCLOUDCOVER":var d=this.CDLDARKCLOUDCOVER();b=CDLADDFLAGINFO(d,c,"DCC","Dark Cloud Cover");break;case"CDLDOJISTAR":var d=this.CDLDOJISTAR();b=CDLADDFLAGINFO(d,c,"DS","Doji Star");break;case"CDLDRAGONFLYDOJI":var d=this.CDLDRAGONFLYDOJI();b=CDLADDFLAGINFO(d,c,"DD","Dragonfly Doji");break;case"CDLENGULFING":var d=this.CDLENGULFING();b=CDLADDFLAGINFO(d,c,"EP","Engulfing Pattern");break;case"CDLEVENINGDOJISTAR":var d=this.CDLEVENINGDOJISTAR();b=CDLADDFLAGINFO(d,c,"EDS","Evening Doji Star");break;case"CDLEVENINGSTAR":var d=this.CDLEVENINGSTAR();b=CDLADDFLAGINFO(d,c,"ES","Evening Star");break;case"CDLGAPSIDESIDEWHITE":var d=this.CDLGAPSIDESIDEWHITE();b=CDLADDFLAGINFO(d,c,"SSWL","Up/Down-Gap Side-By-Side White Lines");break;case"CDLGRAVESTONEDOJI":var d=this.CDLGRAVESTONEDOJI();b=CDLADDFLAGINFO(d,c,"GSD","Gravestone Doji");break;case"CDLHAMMER":var d=this.CDLHAMMER();b=CDLADDFLAGINFO(d,c,"H","Hammer");break;case"CDLHANGINGMAN":var d=this.CDLHANGINGMAN();b=CDLADDFLAGINFO(d,c,"HM","Hanging Man");break;case"CDLHARAMI":var d=this.CDLHARAMI();b=CDLADDFLAGINFO(d,c,"HP","Harami Pattern");break;case"CDLHARAMICROSS":var d=this.CDLHARAMICROSS();b=CDLADDFLAGINFO(d,c,"HCP","Harami Cross Pattern");break;case"CDLHOMINGPIGEON":var d=this.CDLHOMINGPIGEON();b=CDLADDFLAGINFO(d,c,"HP","Homing Pigeon");break;case"CDLHIKKAKE":var d=this.CDLHIKKAKE();b=CDLADDFLAGINFO(d,c,"HP","Hikkake Pattern");break;case"CDLHIGHWAVE":var d=this.CDLHIGHWAVE();b=CDLADDFLAGINFO(d,c,"HW","High Wave");break;case"CDLIDENTICAL3CROWS":var d=this.CDLIDENTICAL3CROWS();b=CDLADDFLAGINFO(d,c,"ITC","Identical Three Crows");break;case"CDLINNECK":var d=this.CDLINNECK();b=CDLADDFLAGINFO(d,c,"IN","In-Neck");break;case"CDLINVERTEDHAMMER":var d=this.CDLINVERTEDHAMMER();b=CDLADDFLAGINFO(d,c,"IH","Inverted Hammer");break;case"CDLKICKING":var d=this.CDLKICKING();b=CDLADDFLAGINFO(d,c,"KC","Kicking");break;case"CDLKICKINGBYLENGTH":var d=this.CDLKICKINGBYLENGTH();b=CDLADDFLAGINFO(d,c,"KCWLM","Kicking (longer marubozu)");break;case"CDLLADDERBOTTOM":var d=this.CDLLADDERBOTTOM();b=CDLADDFLAGINFO(d,c,"LB","Ladder Bottom");break;case"CDLLONGLEGGEDDOJI":var d=this.CDLLONGLEGGEDDOJI();b=CDLADDFLAGINFO(d,c,"LLD","Long Legged Doji");break;case"CDLLONGLINE":var d=this.CDLLONGLINE();b=CDLADDFLAGINFO(d,c,"LLC","Long Line Candle");break;case"CDLMARUBOZU":var d=this.CDLMARUBOZU();b=CDLADDFLAGINFO(d,c,"MZ","Marubozu");break;case"CDLMATCHINGLOW":var d=this.CDLMATCHINGLOW();b=CDLADDFLAGINFO(d,c,"ML","Matching Low");break;case"CDLMATHOLD":var d=this.CDLMATHOLD();b=CDLADDFLAGINFO(d,c,"MH","Mat Hold");break;case"CDLMORNINGDOJISTAR":var d=this.CDLMORNINGDOJISTAR();b=CDLADDFLAGINFO(d,c,"MDS","Morning Doji Star");break;case"CDLMORNINGSTAR":var d=this.CDLMORNINGSTAR();b=CDLADDFLAGINFO(d,c,"MS","Morning Star");break;case"CDLONNECK":var d=this.CDLONNECK();b=CDLADDFLAGINFO(d,c,"ON","On-Neck");break;case"CDLPIERCING":var d=this.CDLPIERCING();b=CDLADDFLAGINFO(d,c,"PP","Piercing Pattern");break;case"CDLRICKSHAWMAN":var d=this.CDLRICKSHAWMAN();b=CDLADDFLAGINFO(d,c,"RM","Rickshaw Man");break;case"CDLRISEFALL3METHODS":var d=this.CDLRISEFALL3METHODS();b=CDLADDFLAGINFO(d,c,"FTM","Falling Three Methods");break;case"CDLSEPARATINGLINES":var d=this.CDLSEPARATINGLINES();b=CDLADDFLAGINFO(d,c,"SL","Separating Lines");break;case"CDLSHOOTINGSTAR":var d=this.CDLSHOOTINGSTAR();b=CDLADDFLAGINFO(d,c,"SS","Shooting Star");break;case"CDLSPINNINGTOP":var d=this.CDLSPINNINGTOP();b=CDLADDFLAGINFO(d,c,"ST","Spinning Top");break;case"CDLSTALLEDPATTERN":var d=this.CDLSTALLEDPATTERN();b=CDLADDFLAGINFO(d,c,"SP","Stalled Pattern");break;case"CDLSTICKSANDWICH":var d=this.CDLSTICKSANDWICH();b=CDLADDFLAGINFO(d,c,"SS","Stick Sandwich");break;case"CDLTAKURI":var d=this.CDLTAKURI();b=CDLADDFLAGINFO(d,c,"TK","Takuri");break;case"CDLTASUKIGAP":var d=this.CDLTASUKIGAP();

b=CDLADDFLAGINFO(d,c,"TG","Tasuki Gap");break;case"CDLTHRUSTING":var d=this.CDLTHRUSTING();b=CDLADDFLAGINFO(d,c,"TP","Thrusting Pattern");break;case"CDLTRISTAR":var d=this.CDLTRISTAR();b=CDLADDFLAGINFO(d,c,"TSP","Tristar Pattern");break;case"CDLUNIQUE3RIVER":var d=this.CDLUNIQUE3RIVER();b=CDLADDFLAGINFO(d,c,"U3R","Unique 3 River");break;case"CDLUPSIDEGAP2CROWS":var d=this.CDLUPSIDEGAP2CROWS();b=CDLADDFLAGINFO(d,c,"UGTC","Upside Gap Two Crows");break;case"CDLXSIDEGAP3METHODS":var d=this.CDLXSIDEGAP3METHODS();b=CDLADDFLAGINFO(d,c,"GTM","Upside/Downside Gap Three Methods")}return b},CDLADDFLAGINFO=function(a,b,c,d){var e;return a.isBull?e={x:b,title:'<span style="color : blue">'+c+"</span>",text:d+" : Bull"}:a.isBear&&(e={x:b,title:'<span style="color : red">'+c+"</span>",text:d+" : Bear"}),e},CDLGETPARAMS=function(a){var b=a.length-1,c=b-1,d=b-2,e=b-3,f=b-4,g={candleOne_Open:a[b].open,candleOne_Close:a[b].close,candleOne_High:a[b].high,candleOne_Low:a[b].low,candleTwo_Open:a[c].open,candleTwo_Close:a[c].close,candleTwo_High:a[c].high,candleTwo_Low:a[c].low,candleThree_Open:a[d].open,candleThree_Close:a[d].close,candleThree_High:a[d].high,candleThree_Low:a[d].low,isCandleOne_Bullish:a[b].close>a[b].open,isCandleOne_Bearish:a[b].close<a[b].open,isCandleTwo_Bullish:a[c].close>a[c].open,isCandleTwo_Bearish:a[c].close<a[c].open,isCandleThree_Bullish:a[d].close>a[d].open,isCandleThree_Bearish:a[d].close<a[d].open};return g.candleFour_Index=e,e>=0&&(g.candleFour_Open=a[e].open,g.candleFour_Close=a[e].close,g.candleFour_High=a[e].high,g.candleFour_Low=a[e].low,g.isCandleFour_Bullish=a[e].close>a[e].open,g.isCandleFour_Bearish=a[e].close<a[e].open),g.candleFive_Index=f,f>=0&&(g.candleFive_Open=a[f].open,g.candleFive_Close=a[f].close,g.candleFive_High=a[f].high,g.candleFive_Low=a[f].low,g.isCandleFive_Bullish=a[f].close>a[f].open,g.isCandleFive_Bearish=a[f].close<a[f].open),g},DEMA=function(a,b,c){IndicatorBase.call(this,a,b,c),this.ema1=null,this.ema2=null,this.ema1=new EMA(a,{period:b.period,appliedTo:b.appliedTo},c);var d=[];this.ema1.indicatorData.forEach(function(a){d.push({time:a.time,close:a.value})}),this.ema2=new EMA(d,{period:b.period,appliedTo:c.CLOSE},c);for(var e=0;e<a.length;e++){var f=this.ema1.indicatorData[e].value,g=this.ema2.indicatorData[e].value,h=toFixed(2*f-g,4);this.indicatorData.push({time:a[e].time,value:h})}},DEMA.prototype=Object.create(IndicatorBase.prototype),DEMA.prototype.constructor=DEMA,DEMA.prototype.addPoint=function(a){var b=this.ema1.addPoint(a)[0].value,c=this.ema2.addPoint({time:a.time,close:b})[0].value,d=toFixed(2*b-c,4);return this.indicatorData.push({time:a.time,value:d}),[{id:this.uniqueID,value:d}]},DEMA.prototype.update=function(a){var b=this.indicatorData.length-1,c=this.ema1.update(a)[0].value,d=this.ema2.update({time:a.time,close:c})[0].value,e=toFixed(2*c-d,4);return this.indicatorData[b].value=e,[{id:this.uniqueID,value:e}]},DEMA.prototype.toString=function(){return"DEMA ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},EMA=function(a,b,c){IndicatorBase.call(this,a,b,c);for(var d=0;d<a.length;d++)if(d===this.options.period-1){for(var e=0,f=this.options.period-1;f>=0;f--)e+=c.getIndicatorOrPriceValue(a[d-f],this.options.appliedTo);var g=toFixed(e/this.options.period,4);this.indicatorData.push({time:a[d].time,value:g})}else if(d>this.options.period-1){var h=this.indicatorData[d-1].value,i=c.getIndicatorOrPriceValue(a[d],this.options.appliedTo),j=2*i/(this.options.period+1)+h*(1-2/(this.options.period+1));j=toFixed(j,4),this.indicatorData.push({time:a[d].time,value:j})}else this.indicatorData.push({time:a[d].time,value:0})},EMA.prototype=Object.create(IndicatorBase.prototype),EMA.prototype.constructor=EMA,EMA.prototype.addPoint=function(a){var b=this.indicatorData.length-1,c=this.indicatorData[b].value,d=this.indicators.getIndicatorOrPriceValue(a,this.options.appliedTo),e=2*d/(this.options.period+1)+c*(1-2/(this.options.period+1));return e=toFixed(e,4),this.indicatorData.push({time:a.time,value:e}),[{id:this.uniqueID,value:e}]},EMA.prototype.update=function(a){var b=this.indicatorData.length-1,c=this.indicatorData[b-1].value,d=this.indicators.getIndicatorOrPriceValue(a,this.options.appliedTo),e=2*d/(this.options.period+1)+c*(1-2/(this.options.period+1));return e=toFixed(e,4),this.indicatorData[b].value=e,[{id:this.uniqueID,value:e}]},EMA.prototype.toString=function(){return"EMA ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},HMA=function(a,b,c){IndicatorBase.call(this,a,b,c),this.someTypeOfMa1=null,this.someTypeOfMa2=null,this.someTypeOfMa3=null;var d=(b.maType||"sma").toUpperCase(),e=0|Math.round(b.period/2);this.someTypeOfMa1=new window[d](a,{period:e,appliedTo:b.appliedTo},c),this.someTypeOfMa2=new window[d](a,{period:b.period,appliedTo:b.appliedTo},c);for(var f=[],g=0;g<a.length;g++){var h=this.someTypeOfMa1.indicatorData[g].value,i=this.someTypeOfMa2.indicatorData[g].value,j=2*h-i;f.push({time:a[g].time,close:j})}var k=0|Math.round(Math.sqrt(b.period));this.someTypeOfMa3=new window[d](f,{period:k,appliedTo:c.CLOSE},c),this.indicatorData=this.someTypeOfMa3.indicatorData},HMA.prototype=Object.create(IndicatorBase.prototype),HMA.prototype.constructor=HMA,HMA.prototype.addPoint=function(a){var b=this.someTypeOfMa1.addPoint(a)[0].value,c=this.someTypeOfMa2.addPoint(a)[0].value,d=2*b-c,e=this.someTypeOfMa3.addPoint({time:a.time,close:d})[0].value;return this.indicatorData=this.someTypeOfMa3.indicatorData,[{id:this.uniqueID,value:e}]},HMA.prototype.update=function(a){var b=this.someTypeOfMa1.update(a)[0].value,c=this.someTypeOfMa2.update(a)[0].value,d=2*b-c,e=this.someTypeOfMa3.update({time:a.time,close:d})[0].value;return this.indicatorData=this.someTypeOfMa3.indicatorData,[{id:this.uniqueID,value:e}]},HMA.prototype.toString=function(){return"HMA ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+", "+this.options.maType+")"},define(["jquery","lodash","common/util","highcharts-more"],function(a,b){var c=[];require(["text!charts/indicators/indicators.json"],function(a){c=b.cloneDeep(JSON.parse(a))});var d={OPEN:0,HIGH:1,LOW:2,CLOSE:3,initHighchartIndicators:function(a){Highcharts.Series.prototype.addIndicator=function(e,f){var g=a.chain().find({instrumentCdAndTp:this.options.id}).simplesort("time",!1).data(),h=new(window[b.startsWith(e.toUpperCase(),"CDL")?"CDL":e.toUpperCase()])(g,f,d),i=this,j=i.chart,k=c[e];if(k){var l=h.buildSeriesAndAxisConfFromData(k);l.forEach(function(a){if(a.axisConf&&(j.addAxis(a.axisConf,!1,!1,!1),d.recalculate(j)),a.seriesConf){var c=b.extend(a.seriesConf,{dataGrouping:i.options.dataGrouping,opposite:i.options.opposite});k.onChartIndicator&&(c=b.extend(c,{compare:i.options.compare})),j.addSeries(c,!1,!1)}}),j.redraw(),this[e]=this[e]||[],this[e].push(h)}},Highcharts.Series.prototype.removeIndicator=function(a){var b=this;if(b.options.isInstrument)for(var e in c){var f=c[e];b[f.id]&&b[f.id].forEach(function(c,e){return c.isSameInstance(a)?(a.forEach(function(a){var c=b.chart.get(a);c&&c.remove(!1),c=b.chart.get(f.id+"-"+a),c&&(c.remove(!1),d.recalculate(b.chart))}),b[f.id].splice(e,1),!1):void 0})}this.chart.redraw()},Highcharts.wrap(Highcharts.Series.prototype,"addPoint",function(d,e,f,g,h){d.call(this,e,f,g,h);var i=this;if(i.options.isInstrument){var j=e[0],k=(a.chain().find({$and:[{instrumentCdAndTp:i.options.id},{time:j}]}).simplesort("time",!0).limit(1).data()||[])[0];if(k)for(var l in c){var m=c[l];i[m.id]&&i[m.id].forEach(function(a){var c=a.addPoint(k);c.forEach(function(a){b.isArray(a.value)?i.chart.get(a.id).addPoint(b.flattenDeep([j,a.value])):a.value instanceof CDLUpdateObject?b.isNumber(a.value.x)&&a.value.x>0&&!b.isEmpty(a.value.text)&&i.chart.get(a.id).addPoint(a.value.toJSObject()):i.chart.get(a.id).addPoint([j,a.value])})})}}}),Highcharts.wrap(Highcharts.Point.prototype,"update",function(d,e,f,g){d.call(this,e,f,g);var h=this.series;if(h.options.isInstrument){var i=this.x||this.time,j=(a.chain().find({$and:[{instrumentCdAndTp:h.options.id},{time:i}]}).simplesort("time",!0).limit(1).data()||[])[0];if(j)for(var k in c){var l=c[k];h[l.id]&&h[l.id].forEach(function(a){var c=a.update(j);c.forEach(function(a){var c=h.chart.get(a.id),d=c.data;if(b.isArray(a.value))d[d.length-1].update(b.flattenDeep([i,a.value]));else if(a.value instanceof CDLUpdateObject){var e=a.value.toJSObject(),f=e.x,g=b.find(d,function(a){return b.isNumber(f)&&f>0&&f===a.x});g&&g.remove(),b.isNumber(f)&&f>0&&!b.isEmpty(e.text)&&c.addPoint(e)}else d[d.length-1].update({y:a.value})})})}}})},recalculate:function(b){var c=1,d=b.yAxis.length;d--,d--;var e=Math.round(45/d),f=0;0>=d?b.yAxis[0].update({top:"0%",height:"100%"},!1):a.each(b.yAxis,function(a,b){0==a?(b.update({top:"0%",height:"50%"},!1),f+=50):b.options&&b.options.id&&-1!=b.options.id.toLowerCase().indexOf("navigator")||(b.update({top:f+c+"%",height:(f+c+e>100?100-f-c:e)+"%",offset:0},!1),f+=c+e)})},appliedPriceString:function(a){var b="CLOSE";switch(a){case d.OPEN:b="OPEN";break;case d.HIGH:b="HIGH";break;case d.LOW:b="LOW";break;case d.CLOSE:b="CLOSE"}return b},getIndicatorOrPriceValue:function(a,b){var c=a.close;switch(b){case this.OPEN:c=a.open;break;case this.HIGH:c=a.high;break;case this.LOW:c=a.low}return c},isLongCandle:function(a,b,c,d){var e=Math.abs(a-d),f=Math.abs(b-c);return e>=.7*f}};return d}),KAMA=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[],this.CalculateKAMAValue=function(a,b){for(var c=2/(this.options.fastPeriod+1),d=2/(this.options.slowPeriod+1),e=Math.abs(this.indicators.getIndicatorOrPriceValue(a[b],this.options.appliedTo)-this.indicators.getIndicatorOrPriceValue(this.priceData[b-this.options.period],this.options.appliedTo)),f=0,g=0;g<this.options.period;g++)f+=Math.abs(this.indicators.getIndicatorOrPriceValue(a[b-g],this.options.appliedTo)-this.indicators.getIndicatorOrPriceValue(this.priceData[b-(g+1)],this.options.appliedTo));var h=e/f,i=Math.pow(h*(c-d)+d,2),j=this.indicators.getIndicatorOrPriceValue(a[b],this.options.appliedTo),k=this.indicatorData[b-1].value,l=toFixed(k+i*(j-k),4);return l};for(var d=0;d<a.length;d++){if(d>this.options.period-1){var e=this.CalculateKAMAValue(a,d);this.indicatorData.push({time:a[d].time,value:e})}else if(d===this.options.period-1){var e=toFixed(c.getIndicatorOrPriceValue(a[d],this.options.appliedTo),4);this.indicatorData.push({time:a[d].time,value:0})}else this.indicatorData.push({time:a[d].time,value:0});this.priceData.push(a[d])}},KAMA.prototype=Object.create(IndicatorBase.prototype),KAMA.prototype.constructor=KAMA,KAMA.prototype.addPoint=function(a){this.priceData.push(a);var b=this.CalculateKAMAValue(this.priceData,this.priceData.length-1);return this.indicatorData.push({time:a.time,value:b}),[{id:this.uniqueID,value:b}]},KAMA.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var c=this.CalculateKAMAValue(this.priceData,b);return this.indicatorData[b].value=c,[{id:this.uniqueID,value:c}]},KAMA.prototype.toString=function(){return"KAMA ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},LWMA=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[];for(var d=0;d<a.length;d++){if(d>=this.options.period-1){for(var e=0,f=0,g=this.options.period-1;g>=0;g--)e+=c.getIndicatorOrPriceValue(a[d-g],this.options.appliedTo)*(d-g),f+=d-g;var h=toFixed(e/f,4);this.indicatorData.push({time:a[d].time,value:h})}else this.indicatorData.push({time:a[d].time,value:0});this.priceData.push(a[d])}},LWMA.prototype=Object.create(IndicatorBase.prototype),LWMA.prototype.constructor=LWMA,LWMA.prototype.addPoint=function(a){this.priceData.push(a);for(var b=0,c=0,d=this.options.period-1;d>=0;d--){var e=this.priceData.length-1;b+=this.indicators.getIndicatorOrPriceValue(this.priceData[e-d],this.options.appliedTo)*(e-d),c+=e-d}var f=toFixed(b/c,4);return this.indicatorData.push({time:a.time,value:f}),[{id:this.uniqueID,value:f}]},LWMA.prototype.update=function(a){var b=0,c=0,d=this.priceData.length-1;this.priceData[d].open=a.open,this.priceData[d].high=a.high,this.priceData[d].low=a.low,this.priceData[d].close=a.close;for(var e=this.options.period-1;e>=0;e--)b+=this.indicators.getIndicatorOrPriceValue(this.priceData[d-e],this.options.appliedTo)*(d-e),c+=d-e;var f=toFixed(b/c,4);return this.indicatorData[d].value=f,[{id:this.uniqueID,value:f}]},LWMA.prototype.toString=function(){return"LWMA ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},MACD=function(a,b,c){b.fastMaType=(b.fastMaType||"SMA").toUpperCase(),b.slowMaType=(b.slowMaType||"SMA").toUpperCase(),b.signalMaType=(b.signalMaType||"SMA").toUpperCase(),IndicatorBase.call(this,a,b,c);var d={maType:b.slowMaType,period:b.slowPeriod},e={maType:b.fastMaType,period:b.fastPeriod},f={maType:b.signalMaType,period:b.signalPeriod+b.slowPeriod-1};this.fastMa=new window[b.fastMaType](a,e,c),this.slowMa=new window[b.slowMaType](a,d,c),this.histogramData=[],this.uniqueID=[uuid(),uuid(),uuid()];for(var g=0;g<a.length;g++){var h=toFixed(this.fastMa.indicatorData[g].value-this.slowMa.indicatorData[g].value,4);this.indicatorData.push({time:a[g].time,value:h,close:h})}this.signalMa=new window[b.signalMaType](this.indicatorData,f,c),this.signalData=this.signalMa.indicatorData;var g=0,i=this;this.indicatorData.forEach(function(b){var c=toFixed(b.value-i.signalData[g].value,4);i.histogramData.push({time:a[g].time,value:c}),g++})},MACD.prototype=Object.create(IndicatorBase.prototype),MACD.prototype.constructor=MACD,MACD.prototype.addPoint=function(a){var b=this.fastMa.addPoint(a)[0].value,c=this.slowMa.addPoint(a)[0].value,d=toFixed(b-c,4),e=this.signalMa.addPoint({time:a.time,close:d})[0].value,f=toFixed(d-e,4);return this.signalData=this.signalMa.indicatorData,this.histogramData.push({time:a.time,value:f}),this.indicatorData.push({time:a.time,value:d}),[{id:this.uniqueID[0],value:d},{id:this.uniqueID[1],value:e},{id:this.uniqueID[2],value:f}]},MACD.prototype.update=function(a){var b=this.indicatorData.length-1,c=this.fastMa.update(a)[0].value,d=this.slowMa.update(a)[0].value,e=toFixed(c-d,4),f=this.signalMa.update({time:a.time,close:e})[0].value,g=toFixed(e-f,4);return this.signalData=this.signalMa.indicatorData,this.histogramData[b].value=g,this.indicatorData[b].value=e,[{id:this.uniqueID[0],value:e},{id:this.uniqueID[1],value:f},{id:this.uniqueID[2],value:g}]},MACD.prototype.toString=function(){return"MACD ("+this.options.fastPeriod+", "+this.options.slowPeriod+", "+this.options.signalPeriod+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},MACD.prototype.buildSeriesAndAxisConfFromData=function(a){var b=[];this.indicatorData.forEach(function(a){b.push([a.time,a.value])});var c=[];this.signalData.forEach(function(a){c.push([a.time,a.value])});var d=[];return this.histogramData.forEach(function(a){d.push([a.time,a.value])}),[{axisConf:{id:a.id+"-"+this.uniqueID[0],title:{text:this.toString(),align:"high",offset:0,rotation:0,y:10,x:50},lineWidth:2,plotLines:this.options.levels}},{seriesConf:{id:this.uniqueID[2],name:"Histogram - "+this.toString(),data:d,type:"column",yAxis:a.id+"-"+this.uniqueID[0],color:this.options.stroke,lineWidth:this.options.strokeWidth,dashStyle:this.options.dashStyle,onChartIndicator:!1}},{seriesConf:{id:this.uniqueID[0],name:"MACD - "+this.toString(),data:b,type:"line",yAxis:a.id+"-"+this.uniqueID[0],color:this.options.stroke,lineWidth:this.options.strokeWidth,dashStyle:this.options.dashStyle,onChartIndicator:!1}},{seriesConf:{id:this.uniqueID[1],name:"SIGNAL - "+this.toString(),data:c,type:"line",yAxis:a.id+"-"+this.uniqueID[0],color:this.options.stroke,lineWidth:this.options.strokeWidth,dashStyle:this.options.dashStyle,onChartIndicator:!1}}]},MACD.prototype.getIDs=function(){return this.uniqueID},MACD.prototype.isSameInstance=function(a){return _.isEqual(a.sort(),this.uniqueID)},MAMA=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[],this.smooth=[],this.detrender=[],this.period=[],this.I1=[],this.Q1=[],this.I2=[],this.Q2=[],this.Re=[],this.Im=[],this.smoothPeriod=[],this.phase=[],this.CalculateMAMAValue=function(a,b){var c=this.indicators.getIndicatorOrPriceValue(a[b],this.options.appliedTo);if(10>=b)this.smooth.push(0),this.detrender.push(0),this.I1.push(0),this.Q1.push(0),this.I2.push(0),this.Q2.push(0),this.Re.push(0),this.Im.push(0),this.period.push(0),this.smoothPeriod.push(0),this.phase.push(0);else if(b>10){this.smooth.push((4*this.indicators.getIndicatorOrPriceValue(a[b],this.options.appliedTo)+3*this.indicators.getIndicatorOrPriceValue(a[b-1],this.options.appliedTo)+2*this.indicators.getIndicatorOrPriceValue(a[b-2],this.options.appliedTo)+1*this.indicators.getIndicatorOrPriceValue(a[b-3],this.options.appliedTo))/10),this.detrender.push((.0962*this.smooth[b]+.5769*this.smooth[b-2]+.5769*this.smooth[b-4]+.0962*this.smooth[b-6])*(.075*this.period[b-1]+.054)),this.Q1.push((.0962*this.detrender[b]+.5769*this.detrender[b-2]+.5769*this.detrender[b-4]+.0962*this.detrender[b-6])*(.075*this.period[b-1]+.054)),this.I1.push(this.detrender[b-3]);var d=(.0962*this.I1[b]+.5769*this.I1[b-2]+.5769*this.I1[b-4]+.0962*this.I1[b-6])*(.075*this.period[b-1]+.054),e=(.0962*this.Q1[b]+.5769*this.Q1[b-2]+.5769*this.Q1[b-4]+.0962*this.Q1[b-6])*(.075*this.period[b-1]+.054);this.I2.push(this.I1[b]-e),this.Q2.push(this.Q1[b]+d),this.I2[b]=.2*this.I2[b]+.8*this.I2[b-1],this.Q2[b]=.2*this.Q2[b]+.8*this.Q2[b-1],this.Re.push(this.I2[b]*this.I2[b-1]+this.Q2[b]*this.Q2[b-1]),this.Im.push(this.I2[b]*this.Q2[b-1]-this.Q2[b]*this.I2[b-1]),this.Re[b]=.2*this.Re[b]+.8*this.Re[b-1],this.Im[b]=.2*this.Im[b]+.8*this.Im[b-1],this.period.push(0),0!==this.Im[b]&&0!==this.Re[b]&&(this.period[b]=360/(57.29577951307855*Math.atan(this.Im[b]/this.Re[b]))),this.period[b]>1.5*this.period[b-1]&&(this.period[b]=1.5*this.period[b-1]),this.period[b]<.67*this.period[b-1]&&(this.period[b]=.67*this.period[b-1]),this.period[b]<6&&(this.period[b]=6),this.period[b]>50&&(this.period[b]=50),this.period[b]=.2*this.period[b]+.8*this.period[b-1],this.smoothPeriod.push(.33*this.period[b]+.67*this.smoothPeriod[b-1]),this.phase.push(0),0!==this.I1[b]&&(this.phase[b]=57.29577951307855*Math.atan(this.Q1[b]/this.I1[b]));var f=this.phase[b-1]-this.phase[b];1>f&&(f=1);var g=this.options.fastLimit/f;g<this.options.slowLimit&&(g=this.options.slowLimit),g>this.options.fastLimit&&(g=this.options.fastLimit),c=g*this.indicators.getIndicatorOrPriceValue(a[b],this.options.appliedTo)+(1-g)*this.indicatorData[b-1].value}return toFixed(c,4)};for(var d=0;d<a.length;d++){var e=this.CalculateMAMAValue(a,d);this.indicatorData.push({time:a[d].time,value:e}),this.priceData.push(a[d])}},MAMA.prototype=Object.create(IndicatorBase.prototype),MAMA.prototype.constructor=MAMA,MAMA.prototype.addPoint=function(a){this.priceData.push(a);var b=this.CalculateMAMAValue(this.priceData,this.priceData.length-1);return this.indicatorData.push({time:a.time,value:b}),[{id:this.uniqueID,value:b}]},MAMA.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var c=this.CalculateMAMAValue(this.priceData,b);return this.indicatorData[b].value=c,[{id:this.uniqueID,value:c}]},MAMA.prototype.toString=function(){return"MAMA ("+this.indicators.appliedPriceString(this.options.appliedTo)+")"},MAX=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[],this.CalculateMAXValue=function(a,b){for(var c=this.indicators.getIndicatorOrPriceValue(a[b],this.options.appliedTo),d=0;d<this.options.period;d++){var e=this.indicators.getIndicatorOrPriceValue(a[b-d],this.options.appliedTo);c=Math.max(c,e)}return toFixed(c,4)};for(var d=0;d<a.length;d++){if(d>=this.options.period-1){var e=this.CalculateMAXValue(a,d);this.indicatorData.push({time:a[d].time,value:e})}else this.indicatorData.push({time:a[d].time,value:0});this.priceData.push(a[d])}},MAX.prototype=Object.create(IndicatorBase.prototype),MAX.prototype.constructor=MAX,MAX.prototype.addPoint=function(a){this.priceData.push(a);var b=this.CalculateMAXValue(this.priceData,this.priceData.length-1);return this.indicatorData.push({time:a.time,value:b}),[{id:this.uniqueID,value:b}]},MAX.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var c=this.CalculateMAXValue(this.priceData,b);return this.indicatorData[b].value=c,[{id:this.uniqueID,value:c}]},MAX.prototype.toString=function(){return"MAX ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},MIN=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[],this.CalculateMINValue=function(a,b){for(var c=this.indicators.getIndicatorOrPriceValue(a[b],this.options.appliedTo),d=0;d<this.options.period;d++){var e=this.indicators.getIndicatorOrPriceValue(a[b-d],this.options.appliedTo);c=Math.min(c,e)}return toFixed(c,4)};for(var d=0;d<a.length;d++){if(d>=this.options.period-1){var e=this.CalculateMINValue(a,d);this.indicatorData.push({time:a[d].time,value:e})}else this.indicatorData.push({time:a[d].time,value:0});this.priceData.push(a[d])}},MIN.prototype=Object.create(IndicatorBase.prototype),MIN.prototype.constructor=MIN,MIN.prototype.addPoint=function(a){this.priceData.push(a);var b=this.CalculateMINValue(this.priceData,this.priceData.length-1);return this.indicatorData.push({time:a.time,value:b}),[{id:this.uniqueID,value:b}]},MIN.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var c=this.CalculateMINValue(this.priceData,b);return this.indicatorData[b].value=c,[{id:this.uniqueID,value:c}]},MIN.prototype.toString=function(){return"MIN ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},PPO=function(a,b,c){b.fastMaType=(b.fastMaType||"SMA").toUpperCase(),b.slowMaType=(b.slowMaType||"SMA").toUpperCase(),b.signalMaType=(b.signalMaType||"SMA").toUpperCase(),IndicatorBase.call(this,a,b,c);var d={maType:b.slowMaType,period:b.slowPeriod},e={maType:b.fastMaType,period:b.fastPeriod},f={maType:b.signalMaType,period:b.signalPeriod+b.slowPeriod-1};this.fastMa=new window[b.fastMaType](a,e,c),this.slowMa=new window[b.slowMaType](a,d,c),this.histogramData=[],this.uniqueID=[uuid(),uuid(),uuid()];for(var g=0;g<a.length;g++){var h=0;0!==this.slowMa.indicatorData[g].value&&(h=toFixed((this.fastMa.indicatorData[g].value-this.slowMa.indicatorData[g].value)/this.slowMa.indicatorData[g].value*100,4)),this.indicatorData.push({time:a[g].time,value:h,close:h})}this.signalMa=new window[b.signalMaType](this.indicatorData,f,c),this.signalData=this.signalMa.indicatorData;var g=0,i=this;this.indicatorData.forEach(function(b){var c=toFixed(b.value-i.signalData[g].value,4);i.histogramData.push({time:a[g].time,value:c}),g++})},PPO.prototype=Object.create(IndicatorBase.prototype),PPO.prototype.constructor=PPO,PPO.prototype.addPoint=function(a){var b=this.fastMa.addPoint(a)[0].value,c=this.slowMa.addPoint(a)[0].value,d=0;0!==c&&(d=toFixed((b-c)/c*100,4));var e=this.signalMa.addPoint({time:a.time,close:d})[0].value,f=toFixed(d-e,4);return this.signalData=this.signalMa.indicatorData,this.histogramData.push({time:a.time,value:f}),this.indicatorData.push({time:a.time,value:d}),[{id:this.uniqueID[0],value:d},{id:this.uniqueID[1],value:e},{id:this.uniqueID[2],value:f}]},PPO.prototype.update=function(a){var b=this.indicatorData.length-1,c=this.fastMa.update(a)[0].value,d=this.slowMa.update(a)[0].value,e=0;0!==d&&(e=toFixed((c-d)/d*100,4));var f=this.signalMa.update({time:a.time,close:e})[0].value,g=toFixed(e-f,4);return this.signalData=this.signalMa.indicatorData,this.histogramData[b].value=g,this.indicatorData[b].value=e,[{id:this.uniqueID[0],value:e},{id:this.uniqueID[1],value:f},{id:this.uniqueID[2],value:g}]},PPO.prototype.toString=function(){return"PPO ("+this.options.fastPeriod+", "+this.options.slowPeriod+", "+this.options.signalPeriod+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},PPO.prototype.buildSeriesAndAxisConfFromData=function(a){var b=[];this.indicatorData.forEach(function(a){b.push([a.time,a.value])});var c=[];this.signalData.forEach(function(a){c.push([a.time,a.value])});var d=[];return this.histogramData.forEach(function(a){d.push([a.time,a.value])}),[{axisConf:{id:a.id+"-"+this.uniqueID[0],title:{text:this.toString(),align:"high",offset:0,rotation:0,y:10,x:50},lineWidth:2,plotLines:this.options.levels}},{seriesConf:{id:this.uniqueID[2],name:"Histogram - "+this.toString(),data:d,type:"column",yAxis:a.id+"-"+this.uniqueID[0],color:this.options.ppoHstgrmColor,lineWidth:this.options.strokeWidth,dashStyle:this.options.dashStyle,onChartIndicator:!1}},{seriesConf:{id:this.uniqueID[0],name:"PPO - "+this.toString(),data:b,type:"line",yAxis:a.id+"-"+this.uniqueID[0],color:this.options.ppoStroke,lineWidth:this.options.strokeWidth,dashStyle:this.options.dashStyle,onChartIndicator:!1}},{seriesConf:{id:this.uniqueID[1],name:"SIGNAL - "+this.toString(),data:c,type:"line",yAxis:a.id+"-"+this.uniqueID[0],color:this.options.signalLineStroke,lineWidth:this.options.strokeWidth,dashStyle:this.options.dashStyle,onChartIndicator:!1}}]},PPO.prototype.getIDs=function(){return this.uniqueID},PPO.prototype.isSameInstance=function(a){return _.isEqual(a.sort(),this.uniqueID)},ROC=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[];for(var d=0;d<a.length;d++){if(d>=this.options.period){var e=this.indicators.getIndicatorOrPriceValue(a[d],this.options.appliedTo),f=this.indicators.getIndicatorOrPriceValue(a[d-this.options.period],this.options.appliedTo),g=toFixed((e-f)/f*100,4);this.indicatorData.push({time:a[d].time,value:g})}else this.indicatorData.push({time:a[d].time,value:0});this.priceData.push(a[d])}},ROC.prototype=Object.create(IndicatorBase.prototype),ROC.prototype.constructor=ROC,ROC.prototype.addPoint=function(a){this.priceData.push(a);var b=this.priceData.length-1,c=this.indicators.getIndicatorOrPriceValue(this.priceData[b],this.options.appliedTo),d=this.indicators.getIndicatorOrPriceValue(this.priceData[b-this.options.period],this.options.appliedTo),e=toFixed((c-d)/d*100,4);return this.indicatorData.push({time:a.time,value:e}),[{id:this.uniqueID,value:e}]},ROC.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var c=this.indicators.getIndicatorOrPriceValue(this.priceData[b],this.options.appliedTo),d=this.indicators.getIndicatorOrPriceValue(this.priceData[b-this.options.period],this.options.appliedTo),e=toFixed((c-d)/d*100,4);return this.indicatorData[b].value=e,[{id:this.uniqueID,value:e}]},ROC.prototype.toString=function(){return"ROC ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},RSI=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[],this.CalculateRSIValue=function(a,b){for(var c=0,d=0,e=0;e<this.options.period;e++){var f=this.indicators.getIndicatorOrPriceValue(a[b-(e+1)],this.options.appliedTo),g=this.indicators.getIndicatorOrPriceValue(a[b-e],this.options.appliedTo);g>f&&(c+=g-f),f>g&&(d+=f-g)}c/=this.options.period,d/=this.options.period;var h=c/d;return toFixed(0==d?100:100-100/(1+h),4)};for(var d=0;d<a.length;d++){if(d>=this.options.period){var e=this.CalculateRSIValue(a,d);this.indicatorData.push({time:a[d].time,value:e})}else this.indicatorData.push({time:a[d].time,value:0});this.priceData.push(a[d])}},RSI.prototype=Object.create(IndicatorBase.prototype),RSI.prototype.constructor=RSI,RSI.prototype.addPoint=function(a){this.priceData.push(a);var b=this.CalculateRSIValue(this.priceData,this.priceData.length-1);return this.indicatorData.push({time:a.time,value:b}),[{id:this.uniqueID,value:b}]},RSI.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var c=this.CalculateRSIValue(this.priceData,b);return this.indicatorData[b].value=c,[{id:this.uniqueID,value:c}]},RSI.prototype.toString=function(){return"RSI ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},SAR=function(a,b,c){IndicatorBase.call(this,a,b,c),this.ep=[],this.af=[],this.trend=[],this.period=5,this.priceData=[],this.calculateSAR=function(a,b,c){var d=a[b].high,e=a[b].low,f=0;if(this.trend[b-2].value===this.trend[b-1].value){var g=this.indicatorData[b-1].value+this.af[b-1].value*(this.ep[b-1].value-this.indicatorData[b-1].value);if("UP"===this.trend[b-1].value){var h=Math.min(a[b-1].low,a[b-2].low);f=h>g?g:h}else{var i=Math.max(a[b-1].high,a[b-2].high);f=g>i?i:g}}else f=this.ep[b-1].value;var j="UP"===this.trend[b-1].value?d>this.ep[b-1].value?d:this.ep[b-1].value:e<this.ep[b-1].value?e:this.ep[b-1].value;c?this.ep.push({time:a[b].time,value:j}):this.ep[b]={time:a[b].time,value:j};var k="";"UP"===this.trend[b-1].value?k=e>f?"UP":"DOWN":"DOWN"===this.trend[b-1].value&&(k=f>d?"DOWN":"UP"),c?this.trend.push({time:a[b].time,value:k}):this.trend[b]={time:a[b].time,value:k};var l=0;return l=this.trend[b].value===this.trend[b-1].value?"UP"===this.trend[b].value?this.af[b-1].value===this.options.maximum?this.af[b-1].value:this.options.maximum:this.af[b-1].value:this.options.acceleration,c?this.af.push({time:a[b].time,value:l}):this.af[b]={time:a[b].time,value:l},toFixed(f,4)};for(var d=0;d<a.length;d++){if(d<this.period)this.ep.push({time:a[d].time,value:0}),this.af.push({time:a[d].time,value:this.options.acceleration}),this.trend.push(d===this.period-1?{time:a[d].time,value:"UP"}:{time:a[d].time,value:""}),this.indicatorData.push({time:a[d].time,value:0});else if(d===this.period){for(var e=0,f=0,g=0;g<this.period;g++){var h=a[d].high,i=a[d].low;0===e&&(e=h),e=Math.min(e,i,h),f=Math.max(e,i,h)}this.ep.push({time:a[d].time,value:f}),this.af.push({time:a[d].time,value:this.options.acceleration});var j="UP";"UP"===this.trend[d-1].value?j=i>e?"UP":"DOWN":"DOWN"===this.trend[d-1].value&&(j=e>h?"DOWN":"UP"),this.trend.push({time:a[d].time,value:j}),this.indicatorData.push({time:a[d].time,value:toFixed(e,4)})}else{var e=this.calculateSAR(a,d,!1);this.indicatorData.push({time:a[d].time,value:e})}this.priceData.push(a[d])}},SAR.prototype=Object.create(IndicatorBase.prototype),SAR.prototype.constructor=SAR,SAR.prototype.addPoint=function(a){this.priceData.push(a);var b=this.calculateSAR(this.priceData,this.priceData.length-1,!1);return this.indicatorData.push({time:a.time,value:b}),[{id:this.uniqueID,value:b}]},SAR.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var c=this.calculateSAR(this.priceData,b,!0);return this.indicatorData[b].value=c,[{id:this.uniqueID,value:c}]},SAR.prototype.toString=function(){return"SAR ("+this.indicators.appliedPriceString(this.options.appliedTo)+")"},SAR.prototype.buildSeriesAndAxisConfFromData=function(){var a=[];return this.indicatorData.forEach(function(b){a.push([b.time,b.value])}),[{seriesConf:{id:this.uniqueID,name:"SAR ("+this.options.acceleration+","+this.options.maximum+")",data:a,lineWidth:0,marker:{enabled:!0},color:this.options.stroke,states:{hover:{enabled:!1}},onChartIndicator:!0}}]},SMA=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[];for(var d=0;d<a.length;d++){if(d>=this.options.period-1){for(var e=0,f=this.options.period-1;f>=0;f--)e+=c.getIndicatorOrPriceValue(a[d-f],this.options.appliedTo);var g=toFixed(e/this.options.period,4);this.indicatorData.push({time:a[d].time,value:g})}else this.indicatorData.push({
time:a[d].time,value:0});this.priceData.push(a[d])}},SMA.prototype=Object.create(IndicatorBase.prototype),SMA.prototype.constructor=SMA,SMA.prototype.addPoint=function(a){this.priceData.push(a);for(var b=0,c=this.options.period-1;c>=0;c--)b+=this.indicators.getIndicatorOrPriceValue(this.priceData[this.priceData.length-1-c],this.options.appliedTo);var d=toFixed(b/this.options.period,4);return this.indicatorData.push({time:a.time,value:d}),[{id:this.uniqueID,value:d}]},SMA.prototype.update=function(a){var b=0,c=this.priceData.length-1;this.priceData[c].open=a.open,this.priceData[c].high=a.high,this.priceData[c].low=a.low,this.priceData[c].close=a.close;for(var d=this.options.period-1;d>=0;d--)b+=this.indicators.getIndicatorOrPriceValue(this.priceData[c-d],this.options.appliedTo);var e=toFixed(b/this.options.period,4);return this.indicatorData[c].value=e,[{id:this.uniqueID,value:e}]},SMA.prototype.toString=function(){return"SMA ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},SMMA=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[],this.CalculateSMMAValue=function(a,b){var c=this.indicatorData[b-1].value,d=c*this.options.period,e=(d-c+this.indicators.getIndicatorOrPriceValue(a[b],this.options.appliedTo))/this.options.period;return toFixed(e,4)};for(var d=0;d<a.length;d++){if(d>this.options.period-1){var e=this.CalculateSMMAValue(a,d);this.indicatorData.push({time:a[d].time,value:e})}else if(d===this.options.period-1){for(var f=0,g=0;g<this.options.period;g++)f+=this.indicators.getIndicatorOrPriceValue(a[g],this.options.appliedTo);var e=toFixed(f/this.options.period,4);this.indicatorData.push({time:a[d].time,value:e})}else this.indicatorData.push({time:a[d].time,value:0});this.priceData.push(a[d])}},SMMA.prototype=Object.create(IndicatorBase.prototype),SMMA.prototype.constructor=SMMA,SMMA.prototype.addPoint=function(a){this.priceData.push(a);var b=this.CalculateSMMAValue(this.priceData,this.priceData.length-1);return this.indicatorData.push({time:a.time,value:b}),[{id:this.uniqueID,value:b}]},SMMA.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var c=this.CalculateSMMAValue(this.priceData,b);return this.indicatorData[b].value=c,[{id:this.uniqueID,value:c}]},SMMA.prototype.toString=function(){return"SMMA ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},SUM=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[],this.CalculateSUMValue=function(a,b){for(var c=0,d=0;d<this.options.period;d++)c+=this.indicators.getIndicatorOrPriceValue(a[b-d],this.options.appliedTo);return toFixed(c,4)};for(var d=0;d<a.length;d++){if(d>=this.options.period-1){var e=this.CalculateSUMValue(a,d);this.indicatorData.push({time:a[d].time,value:e})}else this.indicatorData.push({time:a[d].time,value:0});this.priceData.push(a[d])}},SUM.prototype=Object.create(IndicatorBase.prototype),SUM.prototype.constructor=SUM,SUM.prototype.addPoint=function(a){this.priceData.push(a);var b=this.CalculateSUMValue(this.priceData,this.priceData.length-1);return this.indicatorData.push({time:a.time,value:b}),[{id:this.uniqueID,value:b}]},SUM.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var c=this.CalculateSUMValue(this.priceData,b);return this.indicatorData[b].value=c,[{id:this.uniqueID,value:c}]},SUM.prototype.toString=function(){return"SUM ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},T3=function(a,b,c){IndicatorBase.call(this,a,b,c),this.ema1={},this.ema2={},this.gd1=[],this.gd2=[],this.gd3=[],this.priceData=[],this.CalculateGD=function(a,b,c){this.ema1[b]=new EMA(a,{period:this.options.period,appliedTo:this.options.appliedTo},this.indicators);var d=[];this.ema1[b].indicatorData.forEach(function(a){d.push({time:a.time,close:a.value})}),this.ema2[b]=new EMA(d,{period:this.options.period,appliedTo:this.indicators.CLOSE},this.indicators);var e=[],f=0,g=this.options.vFactor;this.ema2[b].indicatorData.forEach(function(a){e.push({time:a.time,close:a.value});var b=d[f].close*(1+g)-a.value*g;c.push({time:a.time,close:b}),f++})},this.UpdateT3=function(a,b,c,d){var e=this.ema1[c].update(a)[0].value,f=this.ema2[c].update({time:a.time,close:e})[0].value,g=e*(1+this.options.vFactor)-f*this.options.vFactor;return d[b]={time:a.time,close:g},{time:a.time,close:toFixed(g,4)}},this.CalculateGD(a,"gd1",this.gd1),this.CalculateGD(this.gd1,"gd2",this.gd2),this.CalculateGD(this.gd2,"gd3",this.gd3);for(var d=0;d<a.length;d++)this.indicatorData.push({time:this.gd3[d].time,value:toFixed(this.gd3[d].close,4)}),this.priceData.push(a[d])},T3.prototype=Object.create(IndicatorBase.prototype),T3.prototype.constructor=T3,AddT3=function(a,b,c,d){var e=this.ema1[c].addPoint(a)[0].value,f=this.ema2[c].addPoint({time:a.time,close:e})[0].value,g=e*(1+this.options.vFactor)-f*this.options.vFactor;return d.push({time:a.time,close:g}),{time:a.time,close:toFixed(g,4)}},T3.prototype.addPoint=function(a){this.priceData.push(a);var b=this.priceData.length-1,c=AddT3.call(this,a,b,"gd1",this.gd1),d=AddT3.call(this,c,b,"gd2",this.gd2),e=AddT3.call(this,d,b,"gd3",this.gd3);return this.indicatorData.push({time:a.time,value:e.close}),[{id:this.uniqueID,value:e.close}]},T3.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var b=this.priceData.length-1,c=this.UpdateT3(a,b,"gd1",this.gd1),d=this.UpdateT3(c,b,"gd2",this.gd2),e=this.UpdateT3(d,b,"gd3",this.gd3);return this.indicatorData.push({time:a.time,value:e.close}),[{id:this.uniqueID,value:e.close}]},T3.prototype.toString=function(){return"T3 ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},TEMA=function(a,b,c){IndicatorBase.call(this,a,b,c),this.ema1=null,this.ema2=null,this.ema3=null,this.ema1=new EMA(a,{period:b.period,appliedTo:b.appliedTo},c);var d=[];this.ema1.indicatorData.forEach(function(a){d.push({time:a.time,close:a.value})}),this.ema2=new EMA(d,{period:b.period,appliedTo:c.CLOSE},c);var e=[];this.ema2.indicatorData.forEach(function(a){e.push({time:a.time,close:a.value})}),this.ema3=new EMA(e,{period:b.period,appliedTo:c.CLOSE},c);for(var f=0;f<a.length;f++){var g=this.ema1.indicatorData[f].value,h=this.ema2.indicatorData[f].value,i=this.ema3.indicatorData[f].value,j=toFixed(3*g-3*h+i,4);this.indicatorData.push({time:a[f].time,value:j})}},TEMA.prototype=Object.create(IndicatorBase.prototype),TEMA.prototype.constructor=TEMA,TEMA.prototype.addPoint=function(a){var b=this.ema1.addPoint(a)[0].value,c=this.ema2.addPoint({time:a.time,close:b})[0].value,d=this.ema3.addPoint({time:a.time,close:c})[0].value,e=toFixed(3*b-3*c+d,4);return this.indicatorData.push({time:a.time,value:e}),[{id:this.uniqueID,value:e}]},TEMA.prototype.update=function(a){var b=this.indicatorData.length-1,c=this.ema1.update(a)[0].value,d=this.ema2.update({time:a.time,close:c})[0].value,e=this.ema3.update({time:a.time,close:d})[0].value,f=toFixed(3*c-3*d+e,4);return this.indicatorData[b].value=f,[{id:this.uniqueID,value:f}]},TEMA.prototype.toString=function(){return"TEMA ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},TRIMA=function(a,b,c){IndicatorBase.call(this,a,b,c);for(var d=0|Math.round((this.options.period+1)/2),e=0;e<a.length;e++)if(e===d-1){for(var f=0,g=d-1;g>=0;g--)f+=c.getIndicatorOrPriceValue(a[e-g],this.options.appliedTo);this.indicatorData.push({time:a[e].time,value:toFixed(f/d,4)})}else if(e>d-1){var h=this.indicatorData[e-1].value,i=c.getIndicatorOrPriceValue(a[e],this.options.appliedTo),j=(h*(d-1)+i)/d;this.indicatorData.push({time:a[e].time,value:toFixed(j,4)})}else this.indicatorData.push({time:a[e].time,value:0})},TRIMA.prototype=Object.create(IndicatorBase.prototype),TRIMA.prototype.constructor=TRIMA,TRIMA.prototype.addPoint=function(a){var b=0|Math.round((this.options.period+1)/2),c=this.indicatorData.length-1,d=this.indicatorData[c].value,e=this.indicators.getIndicatorOrPriceValue(a,this.options.appliedTo),f=(d*(b-1)+e)/b;return f=toFixed(f,4),this.indicatorData.push({time:a.time,value:f}),[{id:this.uniqueID,value:f}]},TRIMA.prototype.update=function(a){var b=0|Math.round((this.options.period+1)/2),c=this.indicatorData.length-1,d=this.indicatorData[c-1].value,e=this.indicators.getIndicatorOrPriceValue(a,this.options.appliedTo),f=(d*(b-1)+e)/b;return f=toFixed(f,4),this.indicatorData[c].value=f,[{id:this.uniqueID,value:f}]},TRIMA.prototype.toString=function(){return"TRIMA ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"},TYPPRICE=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[];for(var d=0;d<a.length;d++){var e=toFixed((a[d].high+a[d].low+a[d].close)/3,4);this.indicatorData.push({time:a[d].time,value:e}),this.priceData.push(a[d])}},TYPPRICE.prototype=Object.create(IndicatorBase.prototype),TYPPRICE.prototype.constructor=TYPPRICE,TYPPRICE.prototype.addPoint=function(a){this.priceData.push(a);var b=toFixed((a.high+a.low+a.close)/3,4);return this.indicatorData.push({time:a.time,value:b}),[{id:this.uniqueID,value:b}]},TYPPRICE.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var c=toFixed((a.high+a.low+a.close)/3,4);return this.indicatorData[b].value=c,[{id:this.uniqueID,value:c}]},TYPPRICE.prototype.toString=function(){return"TYPPRICE ("+this.indicators.appliedPriceString(this.options.appliedTo)+")"},WCLPRICE=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[];for(var d=0;d<a.length;d++){var e=toFixed((2*a[d].close+a[d].high+a[d].low)/4,4);this.indicatorData.push({time:a[d].time,value:e}),this.priceData.push(a[d])}},WCLPRICE.prototype=Object.create(IndicatorBase.prototype),WCLPRICE.prototype.constructor=WCLPRICE,WCLPRICE.prototype.addPoint=function(a){this.priceData.push(a);var b=toFixed((2*a.close+a.high+a.low)/4,4);return this.indicatorData.push({time:a.time,value:b}),[{id:this.uniqueID,value:b}]},WCLPRICE.prototype.update=function(a){var b=this.priceData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;var c=toFixed((2*a.close+a.high+a.low)/4,4);return this.indicatorData[b].value=c,[{id:this.uniqueID,value:c}]},WCLPRICE.prototype.toString=function(){return"WCLPRICE ("+this.indicators.appliedPriceString(this.options.appliedTo)+")"},WMA=function(a,b,c){IndicatorBase.call(this,a,b,c),this.priceData=[];for(var d=0;d<a.length;d++){if(d>=this.options.period-1){for(var e=0,f=d,g=this.options.period;f>=0&&g>=0;g--,f--){var h=c.getIndicatorOrPriceValue(a[f],this.options.appliedTo);e+=h*g}e/=this.options.period*(this.options.period+1)/2,e=toFixed(e,4),this.indicatorData.push({time:a[d].time,value:e})}else this.indicatorData.push({time:a[d].time,value:0});this.priceData.push(a[d])}},WMA.prototype=Object.create(IndicatorBase.prototype),WMA.prototype.constructor=WMA,WMA.prototype.addPoint=function(a){this.priceData.push(a);for(var b=this.indicatorData.length-1,c=this.indicators.getIndicatorOrPriceValue(a,this.options.appliedTo),d=this.options.period*c,e=b,f=this.options.period-1;e>=0&&f>=1;f--,e--){var c=this.indicators.getIndicatorOrPriceValue(this.priceData[e],this.options.appliedTo);d+=c*f}return d/=this.options.period*(this.options.period+1)/2,d=toFixed(d,4),this.indicatorData.push({time:a.time,value:d}),[{id:this.uniqueID,value:d}]},WMA.prototype.update=function(a){var b=this.indicatorData.length-1;this.priceData[b].open=a.open,this.priceData[b].high=a.high,this.priceData[b].low=a.low,this.priceData[b].close=a.close;for(var c=0,d=b,e=this.options.period;d>=0&&e>=1;e--,d--){var f=this.indicators.getIndicatorOrPriceValue(this.priceData[d],this.options.appliedTo);c+=f*e}return c/=this.options.period*(this.options.period+1)/2,c=toFixed(c,4),this.indicatorData[b].value=c,[{id:this.uniqueID,value:c}]},WMA.prototype.toString=function(){return"WMA ("+this.options.period+", "+this.indicators.appliedPriceString(this.options.appliedTo)+")"};